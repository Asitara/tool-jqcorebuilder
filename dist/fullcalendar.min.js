/*! Eqdkp-Plus - v1.1.0pre - 2013-09-11
* http://eqdkp-plus.com
* Copyright (c) 2013 Eqdkp-Plus dev team;
 Licensed CC-BY-NC-SA-3.0 */
(function(t,e){function i(e){t.extend(!0,xe,e)}function s(i,s,h){function c(t){ne?m()&&(D(),k(t)):u()}function u(){re=s.theme?"ui":"fc",i.addClass("fc"),s.isRTL?i.addClass("fc-rtl"):i.addClass("fc-ltr"),s.theme&&i.addClass("ui-widget"),ne=t("<div class='fc-content' style='position:relative'/>").prependTo(i),ie=new n(ee,s),se=ie.render(),se&&i.prepend(se),b(s.defaultView),s.handleWindowResize&&t(window).resize(M),v()||p()}function p(){setTimeout(function(){!ae.start&&v()&&x()},0)}function f(){ae&&(te("viewDestroy",ae,ae,ae.element),ae.triggerEventDestroy()),t(window).unbind("resize",M),ie.destroy(),ne.remove(),i.removeClass("fc fc-rtl ui-widget")}function m(){return i.is(":visible")}function v(){return t("body").is(":visible")}function b(t){ae&&t==ae.name||w(t)}function w(e){fe++,ae&&(te("viewDestroy",ae,ae,ae.element),L(),ae.triggerEventDestroy(),Q(),ae.element.remove(),ie.deactivateButton(ae.name)),ie.activateButton(e),ae=new De[e](t("<div class='fc-view fc-view-"+e+"' style='position:relative'/>").appendTo(ne),ee),x(),K(),fe--}function x(t){(!ae.start||t||ae.start>ge||ge>=ae.end)&&m()&&k(t)}function k(t){fe++,ae.start&&(te("viewDestroy",ae,ae,ae.element),L(),q()),Q(),ae.render(ge,t||0),T(),K(),(ae.afterRender||R)(),O(),N(),te("viewRender",ae,ae,ae.element),ae.trigger("viewDisplay",de),fe--,F()}function C(){m()&&(L(),q(),D(),T(),I())}function D(){le=s.contentHeight?s.contentHeight:s.height?s.height-(se?se.height():0)-P(ne):Math.round(ne.width()/Math.max(s.aspectRatio,.5))}function T(){le===e&&D(),fe++,ae.setHeight(le),ae.setWidth(ne.width()),fe--,oe=i.outerWidth()}function M(){if(!fe)if(ae.start){var t=++pe;setTimeout(function(){t==pe&&!fe&&m()&&oe!=(oe=i.outerWidth())&&(fe++,C(),ae.trigger("windowResize",de),fe--)},200)}else p()}function S(){q(),A()}function j(t){q(),I(t)}function I(t){m()&&(ae.setEventData(me),ae.renderEvents(me,t),ae.trigger("eventAfterAllRender"))}function q(){ae.triggerEventDestroy(),ae.clearEvents(),ae.clearEventData()}function F(){!s.lazyFetching||ce(ae.visStart,ae.visEnd)?A():I()}function A(){ue(ae.visStart,ae.visEnd)}function H(t){me=t,I()}function E(t){j(t)}function O(){ie.updateTitle(ae.title)}function N(){var t=new Date;t>=ae.start&&ae.end>t?ie.disableButton("today"):ie.enableButton("today")}function z(t,i,s){ae.select(t,i,s===e?!0:s)}function L(){ae&&ae.unselect()}function W(){x(-1)}function $(){x(1)}function B(){a(ge,-1),x()}function Y(){a(ge,1),x()}function G(){ge=new Date,x()}function U(t,e,i){t instanceof Date?ge=d(t):g(ge,t,e,i),x()}function X(t,i,s){t!==e&&a(ge,t),i!==e&&o(ge,i),s!==e&&l(ge,s),x()}function V(){return d(ge)}function Q(){ne.css({width:"100%",height:ne.height(),overflow:"hidden"})}function K(){ne.css({width:"",height:"",overflow:""})}function J(){return ae}function Z(t,i){return i===e?s[t]:(("height"==t||"contentHeight"==t||"aspectRatio"==t)&&(s[t]=i,C()),e)}function te(t,i){return s[t]?s[t].apply(i||de,Array.prototype.slice.call(arguments,2)):e}var ee=this;ee.options=s,ee.render=c,ee.destroy=f,ee.refetchEvents=S,ee.reportEvents=H,ee.reportEventChange=E,ee.rerenderEvents=j,ee.changeView=b,ee.select=z,ee.unselect=L,ee.prev=W,ee.next=$,ee.prevYear=B,ee.nextYear=Y,ee.today=G,ee.gotoDate=U,ee.incrementDate=X,ee.formatDate=function(t,e){return _(t,e,s)},ee.formatDates=function(t,e,i){return y(t,e,i,s)},ee.getDate=V,ee.getView=J,ee.option=Z,ee.trigger=te,r.call(ee,s,h);var ie,se,ne,re,ae,oe,le,he,ce=ee.isFetchNeeded,ue=ee.fetchEvents,de=i[0],pe=0,fe=0,ge=new Date,me=[];g(ge,s.year,s.month,s.date),s.droppable&&t(document).bind("dragstart",function(e,i){var n=e.target,r=t(n);if(!r.parents(".fc").length){var a=s.dropAccept;(t.isFunction(a)?a.call(n,r):r.is(a))&&(he=n,ae.dragStart(he,e,i))}}).bind("dragstop",function(t,e){he&&(ae.dragStop(he,t,e),he=null)})}function n(i,s){function n(){p=s.theme?"ui":"fc";var i=s.header;return i?f=t("<table class='fc-header' style='width:100%'/>").append(t("<tr/>").append(a("left")).append(a("center")).append(a("right"))):e}function r(){f.remove()}function a(e){var n=t("<td class='fc-header-"+e+"'/>"),r=s.header[e];return r&&t.each(r.split(" "),function(e){e>0&&n.append("<span class='fc-header-space'/>");var r;t.each(this.split(","),function(e,a){if("title"==a)n.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),r&&r.addClass(p+"-corner-right"),r=null;else{var o;if(i[a]?o=i[a]:De[a]&&(o=function(){c.removeClass(p+"-state-hover"),i.changeView(a)}),o){var l=s.theme?N(s.buttonIcons,a):null,h=N(s.buttonText,a),c=t("<span class='fc-button fc-button-"+a+" "+p+"-state-default'>"+(l?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+l+"'/>"+"</span>":h)+"</span>").click(function(){c.hasClass(p+"-state-disabled")||o()}).mousedown(function(){c.not("."+p+"-state-active").not("."+p+"-state-disabled").addClass(p+"-state-down")}).mouseup(function(){c.removeClass(p+"-state-down")}).hover(function(){c.not("."+p+"-state-active").not("."+p+"-state-disabled").addClass(p+"-state-hover")},function(){c.removeClass(p+"-state-hover").removeClass(p+"-state-down")}).appendTo(n);L(c),r||c.addClass(p+"-corner-left"),r=c}}}),r&&r.addClass(p+"-corner-right")}),n}function o(t){f.find("h2").html(t)}function l(t){f.find("span.fc-button-"+t).addClass(p+"-state-active")}function h(t){f.find("span.fc-button-"+t).removeClass(p+"-state-active")}function c(t){f.find("span.fc-button-"+t).addClass(p+"-state-disabled")}function u(t){f.find("span.fc-button-"+t).removeClass(p+"-state-disabled")}var d=this;d.render=n,d.destroy=r,d.updateTitle=o,d.activateButton=l,d.deactivateButton=h,d.disableButton=c,d.enableButton=u;var p,f=t([])}function r(i,s){function n(t,e){return!C||C>t||e>D}function r(t,e){C=t,D=e,A=[];var i=++P,s=I.length;q=s;for(var n=0;s>n;n++)a(I[n],i)}function a(e,s){o(e,function(n){if(s==P){if(n){i.eventDataTransform&&(n=t.map(n,i.eventDataTransform)),e.eventDataTransform&&(n=t.map(n,e.eventDataTransform));for(var r=0;n.length>r;r++)n[r].source=e,_(n[r]);A=A.concat(n)}q--,q||S(A)}})}function o(s,n){var r,a,l=Ce.sourceFetchers;for(r=0;l.length>r;r++){if(a=l[r](s,C,D,n),a===!0)return;if("object"==typeof a)return o(a,n),e}var h=s.events;if(h)t.isFunction(h)?(v(),h(d(C),d(D),function(t){n(t),b()})):t.isArray(h)?n(h):n();else{var c=s.url;if(c){var u,p=s.success,f=s.error,g=s.complete;u=t.isFunction(s.data)?s.data():s.data;var m=t.extend({},u||{}),_=Y(s.startParam,i.startParam),y=Y(s.endParam,i.endParam);_&&(m[_]=Math.round(+C/1e3)),y&&(m[y]=Math.round(+D/1e3)),v(),t.ajax(t.extend({},Te,s,{data:m,success:function(e){e=e||[];var i=B(p,this,arguments);t.isArray(i)&&(e=i),n(e)},error:function(){B(f,this,arguments),n()},complete:function(){B(g,this,arguments),b()}}))}else n()}}function l(t){t=h(t),t&&(q++,a(t,P))}function h(i){return t.isFunction(i)||t.isArray(i)?i={events:i}:"string"==typeof i&&(i={url:i}),"object"==typeof i?(y(i),I.push(i),i):e}function c(e){I=t.grep(I,function(t){return!w(t,e)}),A=t.grep(A,function(t){return!w(t.source,e)}),S(A)}function u(t){var e,i,s=A.length,n=M().defaultEventEnd,r=t.start-t._start,a=t.end?t.end-(t._end||n(t)):0;for(e=0;s>e;e++)i=A[e],i._id==t._id&&i!=t&&(i.start=new Date(+i.start+r),i.end=t.end?i.end?new Date(+i.end+a):new Date(+n(i)+a):null,i.title=t.title,i.url=t.url,i.allDay=t.allDay,i.className=t.className,i.editable=t.editable,i.color=t.color,i.backgroundColor=t.backgroundColor,i.borderColor=t.borderColor,i.textColor=t.textColor,_(i));_(t),S(A)}function p(t,e){_(t),t.source||(e&&(j.events.push(t),t.source=j),A.push(t)),S(A)}function f(e){if(e){if(!t.isFunction(e)){var i=e+"";e=function(t){return t._id==i}}A=t.grep(A,e,!0);for(var s=0;I.length>s;s++)t.isArray(I[s].events)&&(I[s].events=t.grep(I[s].events,e,!0))}else{A=[];for(var s=0;I.length>s;s++)t.isArray(I[s].events)&&(I[s].events=[])}S(A)}function g(e){return t.isFunction(e)?t.grep(A,e):e?(e+="",t.grep(A,function(t){return t._id==e})):A}function v(){F++||T("loading",null,!0,M())}function b(){--F||T("loading",null,!1,M())}function _(t){var s=t.source||{},n=Y(s.ignoreTimezone,i.ignoreTimezone);t._id=t._id||(t.id===e?"_fc"+Me++:t.id+""),t.date&&(t.start||(t.start=t.date),delete t.date),t._start=d(t.start=m(t.start,n)),t.end=m(t.end,n),t.end&&t.end<=t.start&&(t.end=null),t._end=t.end?d(t.end):null,t.allDay===e&&(t.allDay=Y(s.allDayDefault,i.allDayDefault)),t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[]}function y(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=Ce.sourceNormalizers,i=0;e.length>i;i++)e[i](t)}function w(t,e){return t&&e&&x(t)==x(e)}function x(t){return("object"==typeof t?t.events||t.url:"")||t}var k=this;k.isFetchNeeded=n,k.fetchEvents=r,k.addEventSource=l,k.removeEventSource=c,k.updateEvent=u,k.renderEvent=p,k.removeEvents=f,k.clientEvents=g,k.normalizeEvent=_;for(var C,D,T=k.trigger,M=k.getView,S=k.reportEvents,j={events:[]},I=[j],P=0,q=0,F=0,A=[],R=0;s.length>R;R++)h(s[R])}function a(t,e,i){return t.setFullYear(t.getFullYear()+e),i||u(t),t}function o(t,e,i){if(+t){var s=t.getMonth()+e,n=d(t);for(n.setDate(1),n.setMonth(s),t.setMonth(s),i||u(t);t.getMonth()!=n.getMonth();)t.setDate(t.getDate()+(n>t?1:-1))}return t}function l(t,e,i){if(+t){var s=t.getDate()+e,n=d(t);n.setHours(9),n.setDate(s),t.setDate(s),i||u(t),h(t,n)}return t}function h(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(e>t?1:-1)*Ie)}function c(t,e){return t.setMinutes(t.getMinutes()+e),t}function u(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function d(t,e){return e?u(new Date(+t)):new Date(+t)}function p(){var t,e=0;do t=new Date(1970,e++,1);while(t.getHours());return t}function f(t,e){return Math.round((d(t,!0)-d(e,!0))/je)}function g(t,i,s,n){i!==e&&i!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(i)),s!==e&&s!=t.getMonth()&&(t.setDate(1),t.setMonth(s)),n!==e&&t.setDate(n)}function m(t,i){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):(i===e&&(i=!0),v(t,i)||(t?new Date(t):null)):null}function v(t,e){var i=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!i)return null;var s=new Date(i[1],0,1);if(e||!i[13]){var n=new Date(i[1],0,1,9,0);i[3]&&(s.setMonth(i[3]-1),n.setMonth(i[3]-1)),i[5]&&(s.setDate(i[5]),n.setDate(i[5])),h(s,n),i[7]&&s.setHours(i[7]),i[8]&&s.setMinutes(i[8]),i[10]&&s.setSeconds(i[10]),i[12]&&s.setMilliseconds(1e3*Number("0."+i[12])),h(s,n)}else if(s.setUTCFullYear(i[1],i[3]?i[3]-1:0,i[5]||1),s.setUTCHours(i[7]||0,i[8]||0,i[10]||0,i[12]?1e3*Number("0."+i[12]):0),i[14]){var r=60*Number(i[16])+(i[18]?Number(i[18]):0);r*="-"==i[15]?1:-1,s=new Date(+s+1e3*60*r)}return s}function b(t){if("number"==typeof t)return 60*t;if("object"==typeof t)return 60*t.getHours()+t.getMinutes();var e=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(e){var i=parseInt(e[1],10);return e[3]&&(i%=12,"p"==e[3].toLowerCase().charAt(0)&&(i+=12)),60*i+(e[2]?parseInt(e[2],10):0)}}function _(t,e,i){return y(t,null,e,i)}function y(t,e,i,s){s=s||xe;var n,r,a,o,l=t,h=e,c=i.length,u="";for(n=0;c>n;n++)if(r=i.charAt(n),"'"==r){for(a=n+1;c>a;a++)if("'"==i.charAt(a)){l&&(u+=a==n+1?"'":i.substring(n+1,a),n=a);break}}else if("("==r){for(a=n+1;c>a;a++)if(")"==i.charAt(a)){var d=_(l,i.substring(n+1,a),s);parseInt(d.replace(/\D/,""),10)&&(u+=d),n=a;break}}else if("["==r){for(a=n+1;c>a;a++)if("]"==i.charAt(a)){var p=i.substring(n+1,a),d=_(l,p,s);d!=_(h,p,s)&&(u+=d),n=a;break}}else if("{"==r)l=e,h=t;else if("}"==r)l=t,h=e;else{for(a=c;a>n;a--)if(o=qe[i.substring(n,a)]){l&&(u+=o(l,s)),n=a-1;break}a==n&&l&&(u+=r)}return u}function w(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1}function x(t){return t.end?k(t.end,t.allDay):l(d(t.start),1)}function k(t,e){return t=d(t),e||t.getHours()||t.getMinutes()?l(t,1):u(t)}function C(i,s,n){i.unbind("mouseover").mouseover(function(i){for(var r,a,o,l=i.target;l!=this;)r=l,l=l.parentNode;(a=r._fci)!==e&&(r._fci=e,o=s[a],n(o.event,o.element,o),t(i.target).trigger(i)),i.stopPropagation()})}function D(e,i,s){for(var n,r=0;e.length>r;r++)n=t(e[r]),n.width(Math.max(0,i-M(n,s)))}function T(e,i,s){for(var n,r=0;e.length>r;r++)n=t(e[r]),n.height(Math.max(0,i-P(n,s)))}function M(t,e){return S(t)+I(t)+(e?j(t):0)}function S(e){return(parseFloat(t.css(e[0],"paddingLeft",!0))||0)+(parseFloat(t.css(e[0],"paddingRight",!0))||0)}function j(e){return(parseFloat(t.css(e[0],"marginLeft",!0))||0)+(parseFloat(t.css(e[0],"marginRight",!0))||0)}function I(e){return(parseFloat(t.css(e[0],"borderLeftWidth",!0))||0)+(parseFloat(t.css(e[0],"borderRightWidth",!0))||0)}function P(t,e){return q(t)+A(t)+(e?F(t):0)}function q(e){return(parseFloat(t.css(e[0],"paddingTop",!0))||0)+(parseFloat(t.css(e[0],"paddingBottom",!0))||0)}function F(e){return(parseFloat(t.css(e[0],"marginTop",!0))||0)+(parseFloat(t.css(e[0],"marginBottom",!0))||0)}function A(e){return(parseFloat(t.css(e[0],"borderTopWidth",!0))||0)+(parseFloat(t.css(e[0],"borderBottomWidth",!0))||0)}function R(){}function H(t,e){return t-e}function E(t){return Math.max.apply(Math,t)}function O(t){return(10>t?"0":"")+t}function N(t,i){if(t[i]!==e)return t[i];for(var s,n=i.split(/(?=[A-Z])/),r=n.length-1;r>=0;r--)if(s=t[n[r].toLowerCase()],s!==e)return s;return t[""]}function z(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function L(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function W(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function $(t,e){var i=t.source||{},s=t.color,n=i.color,r=e("eventColor"),a=t.backgroundColor||s||i.backgroundColor||n||e("eventBackgroundColor")||r,o=t.borderColor||s||i.borderColor||n||e("eventBorderColor")||r,l=t.textColor||i.textColor||e("eventTextColor"),h=[];return a&&h.push("background-color:"+a),o&&h.push("border-color:"+o),l&&h.push("color:"+l),h.join(";")}function B(e,i,s){if(t.isFunction(e)&&(e=[e]),e){var n,r;for(n=0;e.length>n;n++)r=e[n].apply(i,s)||r;return r}}function Y(){for(var t=0;arguments.length>t;t++)if(arguments[t]!==e)return arguments[t]}function G(t,e){function i(t,e){e&&(o(t,e),t.setDate(1));var i=n("firstDay"),u=d(t,!0);u.setDate(1);var p=o(d(u),1),g=d(u);l(g,-((g.getDay()-i+7)%7)),a(g);var m=d(p);l(m,(7-m.getDay()+i)%7),a(m,-1,!0);var v=h(),b=Math.round(f(m,g)/7);"fixed"==n("weekMode")&&(l(m,7*(6-b)),b=6),s.title=c(u,n("titleFormat")),s.start=u,s.end=p,s.visStart=g,s.visEnd=m,r(b,v,!0)}var s=this;s.render=i,V.call(s,t,e,"month");var n=s.opt,r=s.renderBasic,a=s.skipHiddenDays,h=s.getCellsPerWeek,c=e.formatDate}function U(t,e){function i(t,e){e&&l(t,7*e);var i=l(d(t),-((t.getDay()-n("firstDay")+7)%7)),c=l(d(i),7),u=d(i);a(u);var p=d(c);a(p,-1,!0);var f=o();s.start=i,s.end=c,s.visStart=u,s.visEnd=p,s.title=h(u,l(d(p),-1),n("titleFormat")),r(1,f,!1)}var s=this;s.render=i,V.call(s,t,e,"basicWeek");var n=s.opt,r=s.renderBasic,a=s.skipHiddenDays,o=s.getCellsPerWeek,h=e.formatDates}function X(t,e){function i(t,e){e&&l(t,e),a(t,0>e?-1:1);var i=d(t,!0),h=l(d(i),1);s.title=o(t,n("titleFormat")),s.start=s.visStart=i,s.end=s.visEnd=h,r(1,1,!1)}var s=this;s.render=i,V.call(s,t,e,"basicDay");var n=s.opt,r=s.renderBasic,a=s.skipHiddenDays,o=e.formatDate}function V(e,i,s){function n(t,e,i){ee=t,ie=e,se=i,r(),$||a(),o()}function r(){le=fe("theme")?"ui":"fc",he=fe("columnFormat"),ce=fe("weekNumbers"),de=fe("weekNumberTitle"),pe="iso"!=fe("weekNumberCalculation")?"w":"W"}function a(){V=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(e)}function o(){var i=h();E&&E.remove(),E=t(i).appendTo(e),O=E.find("thead"),N=O.find(".fc-day-header"),$=E.find("tbody"),B=$.find("tr"),Y=$.find(".fc-day"),G=B.find("td:first-child"),U=B.eq(0).find(".fc-day > div"),X=B.eq(0).find(".fc-day-content > div"),W(O.add(O.find("tr"))),W(B),B.eq(0).addClass("fc-first"),B.filter(":last").addClass("fc-last"),Y.each(function(e,i){var s=Ce(Math.floor(e/ie),e%ie);ge("dayRender",H,s,t(i))}),b(Y)}function h(){var t="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+c()+p()+"</table>";return t}function c(){var t,e,i=le+"-widget-header",s="";for(s+="<thead><tr>",ce&&(s+="<th class='fc-week-number "+i+"'>"+z(de)+"</th>"),t=0;ie>t;t++)e=Ce(0,t),s+="<th class='fc-day-header fc-"+Se[e.getDay()]+" "+i+"'>"+z(Me(e,he))+"</th>";return s+="</tr></thead>"}function p(){var t,e,i,s=le+"-widget-content",n="";for(n+="<tbody>",t=0;ee>t;t++){for(n+="<tr class='fc-week'>",ce&&(i=Ce(t,0),n+="<td class='fc-week-number "+s+"'>"+"<div>"+z(Me(i,pe))+"</div>"+"</td>"),e=0;ie>e;e++)i=Ce(t,e),n+=f(i);n+="</tr>"}return n+="</tbody>"}function f(t){var e=le+"-widget-content",i=H.start.getMonth(),s=u(new Date),n="",r=["fc-day","fc-"+Se[t.getDay()],e];return t.getMonth()!=i&&r.push("fc-other-month"),+t==+s?r.push("fc-today",le+"-state-highlight"):s>t?r.push("fc-past"):r.push("fc-future"),n+="<td class='"+r.join(" ")+"'"+" data-date='"+Me(t,"yyyy-MM-dd")+"'"+">"+"<div>",se&&(n+="<div class='fc-day-number'>"+t.getDate()+"</div>"),n+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function g(e){J=e;var i,s,n,r=J-O.height();"variable"==fe("weekMode")?i=s=Math.floor(r/(1==ee?2:6)):(i=Math.floor(r/ee),s=r-i*(ee-1)),G.each(function(e,r){ee>e&&(n=t(r),n.find("> div").css("min-height",(e==ee-1?s:i)-P(n)))})}function m(t){K=t,ae.clear(),oe.clear(),te=0,ce&&(te=O.find("th.fc-week-number").outerWidth()),Z=Math.floor((K-te)/ie),D(N.slice(0,-1),Z)}function b(t){t.click(_).mousedown(ke)}function _(e){if(!fe("selectable")){var i=v(t(this).data("date"));ge("dayClick",this,i,!0,e)}}function y(t,e,i){i&&ne.build();for(var s=Te(t,e),n=0;s.length>n;n++){var r=s[n];b(w(r.row,r.leftCol,r.row,r.rightCol))}}function w(t,i,s,n){var r=ne.rect(t,i,s,n,e);return ye(r,e)}function x(t){return d(t)}function k(t,e){y(t,l(d(e),1),!0)}function C(){xe()}function T(t,e,i){var s=De(t),n=Y[s.row*ie+s.col];ge("dayClick",n,t,e,i)}function M(t,e){re.start(function(t){xe(),t&&w(t.row,t.col,t.row,t.col)},e)}function S(t,e,i){var s=re.stop();if(xe(),s){var n=Ce(s);ge("drop",t,n,!0,e,i)}}function j(t){return d(t.start)}function I(t){return ae.left(t)}function q(t){return ae.right(t)}function F(t){return oe.left(t)}function A(t){return oe.right(t)}function R(t){return B.eq(t)}var H=this;H.renderBasic=n,H.setHeight=g,H.setWidth=m,H.renderDayOverlay=y,H.defaultSelectionEnd=x,H.renderSelection=k,H.clearSelection=C,H.reportDayClick=T,H.dragStart=M,H.dragStop=S,H.defaultEventEnd=j,H.getHoverListener=function(){return re},H.colLeft=I,H.colRight=q,H.colContentLeft=F,H.colContentRight=A,H.getIsCellAllDay=function(){return!0},H.allDayRow=R,H.getRowCnt=function(){return ee},H.getColCnt=function(){return ie},H.getColWidth=function(){return Z},H.getDaySegmentContainer=function(){return V},ue.call(H,e,i,s),ve.call(H),me.call(H),Q.call(H);var E,O,N,$,B,Y,G,U,X,V,K,J,Z,te,ee,ie,se,ne,re,ae,oe,le,he,ce,de,pe,fe=H.opt,ge=H.trigger,ye=H.renderOverlay,xe=H.clearOverlays,ke=H.daySelectionMousedown,Ce=H.cellToDate,De=H.dateToCell,Te=H.rangeToSegments,Me=i.formatDate;L(e.addClass("fc-grid")),ne=new be(function(e,i){var s,n,r;N.each(function(e,a){s=t(a),n=s.offset().left,e&&(r[1]=n),r=[n],i[e]=r}),r[1]=n+s.outerWidth(),B.each(function(i,a){ee>i&&(s=t(a),n=s.offset().top,i&&(r[1]=n),r=[n],e[i]=r)}),r[1]=n+s.outerHeight()}),re=new _e(ne),ae=new we(function(t){return U.eq(t)}),oe=new we(function(t){return X.eq(t)})}function Q(){function t(t,e){i.renderDayEvents(t,e)}function e(){i.getDaySegmentContainer().empty()}var i=this;i.renderEvents=t,i.clearEvents=e,de.call(i)}function K(t,e){function i(t,e){e&&l(t,7*e);var i=l(d(t),-((t.getDay()-n("firstDay")+7)%7)),c=l(d(i),7),u=d(i);a(u);var p=d(c);a(p,-1,!0);var f=o();s.title=h(u,l(d(p),-1),n("titleFormat")),s.start=i,s.end=c,s.visStart=u,s.visEnd=p,r(f)}var s=this;s.render=i,Z.call(s,t,e,"agendaWeek");var n=s.opt,r=s.renderAgenda,a=s.skipHiddenDays,o=s.getCellsPerWeek,h=e.formatDates}function J(t,e){function i(t,e){e&&l(t,e),a(t,0>e?-1:1);var i=d(t,!0),h=l(d(i),1);s.title=o(t,n("titleFormat")),s.start=s.visStart=i,s.end=s.visEnd=h,r(1)}var s=this;s.render=i,Z.call(s,t,e,"agendaDay");var n=s.opt,r=s.renderAgenda,a=s.skipHiddenDays,o=e.formatDate}function Z(i,s,n){function r(t){Ae=t,a(),Z?h():o()}function a(){ze=Xe("theme")?"ui":"fc",Le=Xe("isRTL"),We=b(Xe("minTime")),$e=b(Xe("maxTime")),Be=Xe("columnFormat"),Ye=Xe("weekNumbers"),Ge=Xe("weekNumberTitle"),Ue="iso"!=Xe("weekNumberCalculation")?"w":"W",Pe=Xe("snapMinutes")||Xe("slotMinutes")}function o(){var e,s,n,r,a,o=ze+"-widget-header",l=ze+"-widget-content",u=0==Xe("slotMinutes")%15;for(h(),he=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(i),Xe("allDaySlot")?(ce=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(he),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+o+" fc-agenda-axis'>"+Xe("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+o+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",de=t(e).appendTo(he),pe=de.find("tr"),x(pe.find("td")),he.append("<div class='fc-agenda-divider "+o+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):ce=t([]),fe=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(he),ge=t("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(fe),ye=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ge),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",s=p(),r=c(d(s),$e),c(s,We),Re=0,n=0;r>s;n++)a=s.getMinutes(),e+="<tr class='fc-slot"+n+" "+(a?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+o+"'>"+(u&&a?"&nbsp;":ri(s,Xe("axisFormat")))+"</th>"+"<td class='"+l+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",c(s,Xe("slotMinutes")),Re++;e+="</tbody></table>",xe=t(e).appendTo(ge),k(xe.find("td"))}function h(){var e=f();Z&&Z.remove(),Z=t(e).appendTo(i),ee=Z.find("thead"),ie=ee.find("th").slice(1,-1),se=Z.find("tbody"),ne=se.find("td").slice(0,-1),re=ne.find("> div"),ae=ne.find(".fc-day-content > div"),oe=ne.eq(0),le=re.eq(0),W(ee.add(ee.find("tr"))),W(se.add(se.find("tr")))}function f(){var t="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+g()+m()+"</table>";return t}function g(){var t,e,i,s=ze+"-widget-header",n="";for(n+="<thead><tr>",Ye?(t=ii(0,0),e=ri(t,Ue),Le?e+=Ge:e=Ge+e,n+="<th class='fc-agenda-axis fc-week-number "+s+"'>"+z(e)+"</th>"):n+="<th class='fc-agenda-axis "+s+"'>&nbsp;</th>",i=0;Ae>i;i++)t=ii(0,i),n+="<th class='fc-"+Se[t.getDay()]+" fc-col"+i+" "+s+"'>"+z(ri(t,Be))+"</th>";return n+="<th class='fc-agenda-gutter "+s+"'>&nbsp;</th>"+"</tr>"+"</thead>"}function m(){var t,e,i,s,n,r=ze+"-widget-header",a=ze+"-widget-content",o=u(new Date),l="";for(l+="<tbody><tr><th class='fc-agenda-axis "+r+"'>&nbsp;</th>",i="",e=0;Ae>e;e++)t=ii(0,e),n=["fc-col"+e,"fc-"+Se[t.getDay()],a],+t==+o?n.push(ze+"-state-highlight","fc-today"):o>t?n.push("fc-past"):n.push("fc-future"),s="<td class='"+n.join(" ")+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>",i+=s;return l+=i,l+="<td class='fc-agenda-gutter "+a+"'>&nbsp;</td>"+"</tr>"+"</tbody>"}function v(t){t===e&&(t=De),De=t,ai={};var i=se.position().top,s=fe.position().top,n=Math.min(t-i,xe.height()+s+1);le.height(n-P(oe)),he.css("top",i),fe.height(n-s-1),Ie=xe.find("tr:first").height()+1,qe=Xe("slotMinutes")/Pe,Fe=Ie/qe}function _(e){Ce=e,Oe.clear(),Ne.clear();var i=ee.find("th:first");de&&(i=i.add(de.find("th:first"))),i=i.add(xe.find("th:first")),Te=0,D(i.width("").each(function(e,i){Te=Math.max(Te,t(i).outerWidth())}),Te);var s=Z.find(".fc-agenda-gutter");de&&(s=s.add(de.find("th.fc-agenda-gutter")));var n=fe[0].clientWidth;je=fe.width()-n,je?(D(s,je),s.show().prev().removeClass("fc-last")):s.hide().prev().addClass("fc-last"),Me=Math.floor((n-Te)/Ae),D(ie.slice(0,-1),Me)}function y(){function t(){fe.scrollTop(s)}var e=p(),i=d(e);i.setHours(Xe("firstHour"));var s=O(e,i)+1;t(),setTimeout(t,0)}function w(){y()}function x(t){t.click(C).mousedown(ti)}function k(t){t.click(C).mousedown(X)}function C(t){if(!Xe("selectable")){var e=Math.min(Ae-1,Math.floor((t.pageX-Z.offset().left-Te)/Me)),i=ii(0,e),s=this.parentNode.className.match(/fc-slot(\d+)/);if(s){var n=parseInt(s[1])*Xe("slotMinutes"),r=Math.floor(n/60);i.setHours(r),i.setMinutes(n%60+We),Ve("dayClick",ne[e],i,!1,t)}else Ve("dayClick",ne[e],i,!0,t)}}function M(t,e,i){i&&He.build();for(var s=ni(t,e),n=0;s.length>n;n++){var r=s[n];x(S(r.row,r.leftCol,r.row,r.rightCol))}}function S(t,e,i,s){var n=He.rect(t,e,i,s,he);return Qe(n,he)}function j(t,e){for(var i=0;Ae>i;i++){var s=ii(0,i),n=l(d(s),1),r=new Date(Math.max(s,t)),a=new Date(Math.min(n,e));if(a>r){var o=He.rect(0,i,0,i,ge),h=O(s,r),c=O(s,a);o.top=h,o.height=c-h,k(Qe(o,ge))}}}function I(t){return Oe.left(t)}function q(t){return Ne.left(t)}function F(t){return Oe.right(t)}function A(t){return Ne.right(t)}function R(t){return Xe("allDaySlot")&&!t.row}function E(t){var e=ii(0,t.col),i=t.row;return Xe("allDaySlot")&&i--,i>=0&&c(e,We+i*Pe),e}function O(t,i){if(t=d(t,!0),c(d(t),We)>i)return 0;if(i>=c(d(t),$e))return xe.height();var s=Xe("slotMinutes"),n=60*i.getHours()+i.getMinutes()-We,r=Math.floor(n/s),a=ai[r];return a===e&&(a=ai[r]=xe.find("tr").eq(r).find("td div")[0].offsetTop),Math.max(0,Math.round(a-1+Ie*(n%s/s)))}function N(){return pe}function $(t){var e=d(t.start);return t.allDay?e:c(e,Xe("defaultEventMinutes"))}function B(t,e){return e?d(t):c(d(t),Xe("slotMinutes"))}function Y(t,e,i){i?Xe("allDaySlot")&&M(t,l(d(e),1),!0):G(t,e)}function G(e,i){var s=Xe("selectHelper");if(He.build(),s){var n=si(e).col;if(n>=0&&Ae>n){var r=He.rect(0,n,0,n,ge),a=O(e,e),o=O(e,i);if(o>a){if(r.top=a,r.height=o-a,r.left+=2,r.width-=5,t.isFunction(s)){var l=s(e,i);l&&(r.position="absolute",ke=t(l).css(r).appendTo(ge))}else r.isStart=!0,r.isEnd=!0,ke=t(ei({title:"",start:e,end:i,className:["fc-select-helper"],editable:!1},r)),ke.css("opacity",Xe("dragOpacity"));ke&&(k(ke),ge.append(ke),D(ke,r.width,!0),T(ke,r.height,!0))}}}else j(e,i)}function U(){Ke(),ke&&(ke.remove(),ke=null)}function X(e){if(1==e.which&&Xe("selectable")){Ze(e);var i;Ee.start(function(t,e){if(U(),t&&t.col==e.col&&!R(t)){var s=E(e),n=E(t);i=[s,c(d(s),Pe),n,c(d(n),Pe)].sort(H),G(i[0],i[3])}else i=null},e),t(document).one("mouseup",function(t){Ee.stop(),i&&(+i[0]==+i[1]&&V(i[0],!1,t),Je(i[0],i[3],!1,t))})}}function V(t,e,i){Ve("dayClick",ne[si(t).col],t,e,i)}function Q(t,e){Ee.start(function(t){if(Ke(),t)if(R(t))S(t.row,t.col,t.row,t.col);else{var e=E(t),i=c(d(e),Xe("defaultEventMinutes"));j(e,i)}},e)}function K(t,e,i){var s=Ee.stop();Ke(),s&&Ve("drop",t,E(s),R(s),e,i)}var J=this;J.renderAgenda=r,J.setWidth=_,J.setHeight=v,J.afterRender=w,J.defaultEventEnd=$,J.timePosition=O,J.getIsCellAllDay=R,J.allDayRow=N,J.getCoordinateGrid=function(){return He},J.getHoverListener=function(){return Ee},J.colLeft=I,J.colRight=F,J.colContentLeft=q,J.colContentRight=A,J.getDaySegmentContainer=function(){return ce},J.getSlotSegmentContainer=function(){return ye},J.getMinMinute=function(){return We},J.getMaxMinute=function(){return $e},J.getSlotContainer=function(){return ge},J.getRowCnt=function(){return 1},J.getColCnt=function(){return Ae},J.getColWidth=function(){return Me},J.getSnapHeight=function(){return Fe},J.getSnapMinutes=function(){return Pe},J.defaultSelectionEnd=B,J.renderDayOverlay=M,J.renderSelection=Y,J.clearSelection=U,J.reportDayClick=V,J.dragStart=Q,J.dragStop=K,ue.call(J,i,s,n),ve.call(J),me.call(J),te.call(J);var Z,ee,ie,se,ne,re,ae,oe,le,he,ce,de,pe,fe,ge,ye,xe,ke,Ce,De,Te,Me,je,Ie,Pe,qe,Fe,Ae,Re,He,Ee,Oe,Ne,ze,Le,We,$e,Be,Ye,Ge,Ue,Xe=J.opt,Ve=J.trigger,Qe=J.renderOverlay,Ke=J.clearOverlays,Je=J.reportSelection,Ze=J.unselect,ti=J.daySelectionMousedown,ei=J.slotSegHtml,ii=J.cellToDate,si=J.dateToCell,ni=J.rangeToSegments,ri=s.formatDate,ai={};L(i.addClass("fc-agenda")),He=new be(function(e,i){function s(t){return Math.max(l,Math.min(h,t))}var n,r,a;ie.each(function(e,s){n=t(s),r=n.offset().left,e&&(a[1]=r),a=[r],i[e]=a}),a[1]=r+n.outerWidth(),Xe("allDaySlot")&&(n=pe,r=n.offset().top,e[0]=[r,r+n.outerHeight()]);for(var o=ge.offset().top,l=fe.offset().top,h=l+fe.outerHeight(),c=0;Re*qe>c;c++)e.push([s(o+Fe*c),s(o+Fe*(c+1))])}),Ee=new _e(He),Oe=new we(function(t){return re.eq(t)}),Ne=new we(function(t){return ae.eq(t)})}function te(){function i(t,e){var i,s=t.length,r=[],a=[];for(i=0;s>i;i++)t[i].allDay?r.push(t[i]):a.push(t[i]);b("allDaySlot")&&(te(r,e),S()),o(n(a),e)}function s(){j().empty(),I().empty()}function n(e){var i,s,n,o,l,h=L(),u=A(),p=F(),f=t.map(e,a),g=[];for(s=0;h>s;s++)for(i=N(0,s),c(i,u),l=r(e,f,i,c(d(i),p-u)),l=ee(l),n=0;l.length>n;n++)o=l[n],o.col=s,g.push(o);return g}function r(t,e,i,s){var n,r,a,o,l,h,c,u,p=[],f=t.length;for(n=0;f>n;n++)r=t[n],a=r.start,o=e[n],o>i&&s>a&&(i>a?(l=d(i),c=!1):(l=a,c=!0),o>s?(h=d(s),u=!1):(h=o,u=!0),p.push({event:r,start:l,end:h,isStart:c,isEnd:u}));return p.sort(ce)}function a(t){return t.end?d(t.end):c(d(t.start),b("defaultEventMinutes"))}function o(i,s){var n,r,a,o,l,c,d,p,f,g,m,v,y,w,x,k,D=i.length,T="",S=I(),j=b("isRTL");for(n=0;D>n;n++)r=i[n],a=r.event,o=R(r.start,r.start),l=R(r.start,r.end),c=E(r.col),d=O(r.col),p=d-c,d-=.025*p,p=d-c,f=p*(r.forwardCoord-r.backwardCoord),b("slotEventOverlap")&&(f=Math.max(2*(f-10),f)),j?(m=d-r.backwardCoord*p,g=m-f):(g=c+r.backwardCoord*p,m=g+f),g=Math.max(g,c),m=Math.min(m,d),f=m-g,r.top=o,r.left=g,r.outerWidth=f,r.outerHeight=l-o,T+=h(a,r);for(S[0].innerHTML=T,v=S.children(),n=0;D>n;n++)r=i[n],a=r.event,y=t(v[n]),w=_("eventRender",a,a,y),w===!1?y.remove():(w&&w!==!0&&(y.remove(),y=t(w).css({position:"absolute",top:r.top,left:r.left}).appendTo(S)),r.element=y,a._id===s?u(a,y,r):y[0]._fci=n,U(a,y));for(C(S,i,u),n=0;D>n;n++)r=i[n],(y=r.element)&&(r.vsides=P(y,!0),r.hsides=M(y,!0),x=y.find(".fc-event-title"),x.length&&(r.contentTop=x[0].offsetTop));for(n=0;D>n;n++)r=i[n],(y=r.element)&&(y[0].style.width=Math.max(0,r.outerWidth-r.hsides)+"px",k=Math.max(0,r.outerHeight-r.vsides),y[0].style.height=k+"px",a=r.event,r.contentTop!==e&&10>k-r.contentTop&&(y.find("div.fc-event-time").text(se(a.start,b("timeFormat"))+" - "+a.title),y.find("div.fc-event-title").remove()),_("eventAfterRender",a,a,y))}function h(t,e){var i="<",s=t.url,n=$(t,b),r=["fc-event","fc-event-vert"];return y(t)&&r.push("fc-event-draggable"),e.isStart&&r.push("fc-event-start"),e.isEnd&&r.push("fc-event-end"),r=r.concat(t.className),t.source&&(r=r.concat(t.source.className||[])),i+=s?"a href='"+z(t.url)+"'":"div",i+=" class='"+r.join(" ")+"'"+" style="+"'"+"position:absolute;"+"top:"+e.top+"px;"+"left:"+e.left+"px;"+n+"'"+">"+"<div class='fc-event-inner'>"+"<div class='fc-event-time'>"+z(ne(t.start,t.end,b("timeFormat")))+"</div>"+"<div class='fc-event-title'>"+z(t.title||"")+"</div>"+"</div>"+"<div class='fc-event-bg'></div>",e.isEnd&&w(t)&&(i+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),i+="</"+(s?"a":"div")+">"}function u(t,e,i){var s=e.find("div.fc-event-time");y(t)&&g(t,e,s),i.isEnd&&w(t)&&m(t,e,s),D(t,e)}function p(t,e,i){function s(){h||(e.width(n).height("").draggable("option","grid",null),h=!0)}var n,r,a,o=i.isStart,h=!0,c=q(),u=W(),p=B(),g=Y(),m=A();e.draggable({opacity:b("dragOpacity","month"),revertDuration:b("dragRevertDuration"),start:function(i,m){_("eventDragStart",e,t,i,m),V(t,e),n=e.width(),c.start(function(i,n){if(Z(),i){r=!1;var c=N(0,n.col),m=N(0,i.col);a=f(m,c),i.row?o?h&&(e.width(u-10),T(e,p*Math.round((t.end?(t.end-t.start)/Pe:b("defaultEventMinutes"))/g)),e.draggable("option","grid",[u,1]),h=!1):r=!0:(J(l(d(t.start),a),l(x(t),a)),s()),r=r||h&&!a
}else s(),r=!0;e.draggable("option","revert",r)},i,"drag")},stop:function(i,n){if(c.stop(),Z(),_("eventDragStop",e,t,i,n),r)s(),e.css("filter",""),X(t,e);else{var o=0;h||(o=Math.round((e.offset().top-G().offset().top)/p)*g+m-(60*t.start.getHours()+t.start.getMinutes())),Q(this,t,a,o,h,i,n)}}})}function g(t,e,i){function s(){Z(),o&&(u?(i.hide(),e.draggable("option","grid",null),J(l(d(t.start),y),l(x(t),y))):(n(w),i.css("display",""),e.draggable("option","grid",[T,M])))}function n(e){var s,n=c(d(t.start),e);t.end&&(s=c(d(t.end),e)),i.text(ne(n,s,b("timeFormat")))}var r,a,o,h,u,p,g,m,y,w,k,C=v.getCoordinateGrid(),D=L(),T=W(),M=B(),S=Y();e.draggable({scroll:!1,grid:[T,M],axis:1==D?"y":!1,opacity:b("dragOpacity"),revertDuration:b("dragRevertDuration"),start:function(i,s){_("eventDragStart",e,t,i,s),V(t,e),C.build(),r=e.position(),a=C.cell(i.pageX,i.pageY),o=h=!0,u=p=H(a),g=m=0,y=0,w=k=0},drag:function(t,i){var n=C.cell(t.pageX,t.pageY);if(o=!!n){if(u=H(n),g=Math.round((i.position.left-r.left)/T),g!=m){var l=N(0,a.col),c=a.col+g;c=Math.max(0,c),c=Math.min(D-1,c);var d=N(0,c);y=f(d,l)}u||(w=Math.round((i.position.top-r.top)/M)*S)}(o!=h||u!=p||g!=m||w!=k)&&(s(),h=o,p=u,m=g,k=w),e.draggable("option","revert",!o)},stop:function(i,n){Z(),_("eventDragStop",e,t,i,n),o&&(u||y||w)?Q(this,t,y,u?0:w,u,i,n):(o=!0,u=!1,g=0,y=0,w=0,s(),e.css("filter",""),e.css(r),X(t,e))}})}function m(t,e,i){var s,n,r=B(),a=Y();e.resizable({handles:{s:".ui-resizable-handle"},grid:r,start:function(i,r){s=n=0,V(t,e),_("eventResizeStart",this,t,i,r)},resize:function(o,l){s=Math.round((Math.max(r,e.height())-l.originalSize.height)/r),s!=n&&(i.text(ne(t.start,s||t.end?c(k(t),a*s):null,b("timeFormat"))),n=s)},stop:function(i,n){_("eventResizeStop",this,t,i,n),s?K(this,t,0,a*s,i,n):X(t,e)}})}var v=this;v.renderEvents=i,v.clearEvents=s,v.slotSegHtml=h,de.call(v);var b=v.opt,_=v.trigger,y=v.isEventDraggable,w=v.isEventResizable,k=v.eventEnd,D=v.eventElementHandlers,S=v.setHeight,j=v.getDaySegmentContainer,I=v.getSlotSegmentContainer,q=v.getHoverListener,F=v.getMaxMinute,A=v.getMinMinute,R=v.timePosition,H=v.getIsCellAllDay,E=v.colContentLeft,O=v.colContentRight,N=v.cellToDate,L=v.getColCnt,W=v.getColWidth,B=v.getSnapHeight,Y=v.getSnapMinutes,G=v.getSlotContainer,U=v.reportEventElement,X=v.showEvents,V=v.hideEvents,Q=v.eventDrop,K=v.eventResize,J=v.renderDayOverlay,Z=v.clearOverlays,te=v.renderDayEvents,ie=v.calendar,se=ie.formatDate,ne=ie.formatDates;v.draggableDayEvent=p}function ee(t){var e,i=ie(t),s=i[0];if(se(i),s){for(e=0;s.length>e;e++)ne(s[e]);for(e=0;s.length>e;e++)re(s[e],0,0)}return ae(i)}function ie(t){var e,i,s,n=[];for(e=0;t.length>e;e++){for(i=t[e],s=0;n.length>s&&oe(i,n[s]).length;s++);(n[s]||(n[s]=[])).push(i)}return n}function se(t){var e,i,s,n,r;for(e=0;t.length>e;e++)for(i=t[e],s=0;i.length>s;s++)for(n=i[s],n.forwardSegs=[],r=e+1;t.length>r;r++)oe(n,t[r],n.forwardSegs)}function ne(t){var i,s,n=t.forwardSegs,r=0;if(t.forwardPressure===e){for(i=0;n.length>i;i++)s=n[i],ne(s),r=Math.max(r,1+s.forwardPressure);t.forwardPressure=r}}function re(t,i,s){var n,r=t.forwardSegs;if(t.forwardCoord===e)for(r.length?(r.sort(he),re(r[0],i+1,s),t.forwardCoord=r[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-s)/(i+1),n=0;r.length>n;n++)re(r[n],0,t.forwardCoord)}function ae(t){var e,i,s,n=[];for(e=0;t.length>e;e++)for(i=t[e],s=0;i.length>s;s++)n.push(i[s]);return n}function oe(t,e,i){i=i||[];for(var s=0;e.length>s;s++)le(t,e[s])&&i.push(e[s]);return i}function le(t,e){return t.end>e.start&&t.start<e.end}function he(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||ce(t,e)}function ce(t,e){return t.start-e.start||e.end-e.start-(t.end-t.start)||(t.event.title||"").localeCompare(e.event.title)}function ue(i,s,n){function r(e,i){var s=U[e];return t.isPlainObject(s)?N(s,i||n):s}function a(t,e){return s.trigger.apply(s,[t,e||O].concat(Array.prototype.slice.call(arguments,2),[O]))}function o(t){var e=t.source||{};return Y(t.startEditable,e.startEditable,r("eventStartEditable"),t.editable,e.editable,r("editable"))&&!r("disableDragging")}function h(t){var e=t.source||{};return Y(t.durationEditable,e.durationEditable,r("eventDurationEditable"),t.editable,e.editable,r("editable"))&&!r("disableResizing")}function u(t){$={};var e,i,s=t.length;for(e=0;s>e;e++)i=t[e],$[i._id]?$[i._id].push(i):$[i._id]=[i]}function p(){$={},B={},G=[]}function g(t){return t.end?d(t.end):z(t)}function m(t,e){G.push({event:t,element:e}),B[t._id]?B[t._id].push(e):B[t._id]=[e]}function v(){t.each(G,function(t,e){O.trigger("eventDestroy",e.event,e.event,e.element)})}function b(t,i){i.click(function(s){return i.hasClass("ui-draggable-dragging")||i.hasClass("ui-resizable-resizing")?e:a("eventClick",this,t,s)}).hover(function(e){a("eventMouseover",this,t,e)},function(e){a("eventMouseout",this,t,e)})}function _(t,e){w(t,e,"show")}function y(t,e){w(t,e,"hide")}function w(t,e,i){var s,n=B[t._id],r=n.length;for(s=0;r>s;s++)e&&n[s][0]==e[0]||n[s][i]()}function x(t,e,i,s,n,r,o){var l=e.allDay,h=e._id;C($[h],i,s,n),a("eventDrop",t,e,i,s,n,function(){C($[h],-i,-s,l),W(h)},r,o),W(h)}function k(t,e,i,s,n,r){var o=e._id;D($[o],i,s),a("eventResize",t,e,i,s,function(){D($[o],-i,-s),W(o)},n,r),W(o)}function C(t,i,s,n){s=s||0;for(var r,a=t.length,o=0;a>o;o++)r=t[o],n!==e&&(r.allDay=n),c(l(r.start,i,!0),s),r.end&&(r.end=c(l(r.end,i,!0),s)),L(r,U)}function D(t,e,i){i=i||0;for(var s,n=t.length,r=0;n>r;r++)s=t[r],s.end=c(l(g(s),e,!0),i),L(s,U)}function T(t){return"object"==typeof t&&(t=t.getDay()),Q[t]}function M(){return X}function S(t,e,i){for(e=e||1;Q[(t.getDay()+(i?e:0)+7)%7];)l(t,e)}function j(){var t=I.apply(null,arguments),e=P(t),i=q(e);return i}function I(t,e){var i=O.getColCnt(),s=Z?-1:1,n=Z?i-1:0;"object"==typeof t&&(e=t.col,t=t.row);var r=t*i+(e*s+n);return r}function P(t){var e=O.visStart.getDay();return t+=K[e],7*Math.floor(t/X)+J[(t%X+X)%X]-e}function q(t){var e=d(O.visStart);return l(e,t),e}function F(t){var e=A(t),i=R(e),s=H(i);return s}function A(t){return f(t,O.visStart)}function R(t){var e=O.visStart.getDay();return t+=e,Math.floor(t/7)*X+K[(t%7+7)%7]-K[e]}function H(t){var e=O.getColCnt(),i=Z?-1:1,s=Z?e-1:0,n=Math.floor(t/e),r=(t%e+e)%e*i+s;return{row:n,col:r}}function E(t,e){for(var i=O.getRowCnt(),s=O.getColCnt(),n=[],r=A(t),a=A(e),o=R(r),l=R(a)-1,h=0;i>h;h++){var c=h*s,u=c+s-1,d=Math.max(o,c),p=Math.min(l,u);if(p>=d){var f=H(d),g=H(p),m=[f.col,g.col].sort(),v=P(d)==r,b=P(p)+1==a;n.push({row:h,leftCol:m[0],rightCol:m[1],isStart:v,isEnd:b})}}return n}var O=this;O.element=i,O.calendar=s,O.name=n,O.opt=r,O.trigger=a,O.isEventDraggable=o,O.isEventResizable=h,O.setEventData=u,O.clearEventData=p,O.eventEnd=g,O.reportEventElement=m,O.triggerEventDestroy=v,O.eventElementHandlers=b,O.showEvents=_,O.hideEvents=y,O.eventDrop=x,O.eventResize=k;var z=O.defaultEventEnd,L=s.normalizeEvent,W=s.reportEventChange,$={},B={},G=[],U=s.options;O.isHiddenDay=T,O.skipHiddenDays=S,O.getCellsPerWeek=M,O.dateToCell=F,O.dateToDayOffset=A,O.dayOffsetToCellOffset=R,O.cellOffsetToCell=H,O.cellToDate=j,O.cellToCellOffset=I,O.cellOffsetToDayOffset=P,O.dayOffsetToDate=q,O.rangeToSegments=E;var X,V=r("hiddenDays")||[],Q=[],K=[],J=[],Z=r("isRTL");(function(){r("weekends")===!1&&V.push(0,6);for(var e=0,i=0;7>e;e++)K[e]=i,Q[e]=-1!=t.inArray(e,V),Q[e]||(J[i]=e,i++);if(X=i,!X)throw"invalid hiddenDays"})()}function de(){function e(t,e){var i=s(t,!1,!0);fe(i,function(t,e){q(t.event,e)}),_(i,e),fe(i,function(t,e){S("eventAfterRender",t.event,t.event,e)})}function i(t,e,i){var n=s([t],!0,!1),r=[];return fe(n,function(t,s){t.row===e&&s.css("top",i),r.push(s[0])}),r}function s(e,i,s){var r,l,h=V(),d=i?t("<div/>"):h,p=n(e);return a(p),r=o(p),d[0].innerHTML=r,l=d.children(),i&&h.append(l),c(p,l),fe(p,function(t,e){t.hsides=M(e,!0)}),fe(p,function(t,e){e.width(Math.max(0,t.outerWidth-t.hsides))}),fe(p,function(t,e){t.outerHeight=e.outerHeight(!0)}),u(p,s),p}function n(t){for(var e=[],i=0;t.length>i;i++){var s=r(t[i]);e.push.apply(e,s)}return e}function r(t){for(var e=t.start,i=x(t),s=ee(e,i),n=0;s.length>n;n++)s[n].event=t;return s}function a(t){for(var e=T("isRTL"),i=0;t.length>i;i++){var s=t[i],n=(e?s.isEnd:s.isStart)?U:Y,r=(e?s.isStart:s.isEnd)?X:G,a=n(s.leftCol),o=r(s.rightCol);s.left=a,s.outerWidth=o-a}}function o(t){for(var e="",i=0;t.length>i;i++)e+=h(t[i]);return e}function h(t){var e="",i=T("isRTL"),s=t.event,n=s.url,r=["fc-event","fc-event-hori"];j(s)&&r.push("fc-event-draggable"),t.isStart&&r.push("fc-event-start"),t.isEnd&&r.push("fc-event-end"),r=r.concat(s.className),s.source&&(r=r.concat(s.source.className||[]));var a=$(s,T);return e+=n?"<a href='"+z(n)+"'":"<div",e+=" class='"+r.join(" ")+"'"+" style="+"'"+"position:absolute;"+"left:"+t.left+"px;"+a+"'"+">"+"<div class='fc-event-inner'>",!s.allDay&&t.isStart&&(e+="<span class='fc-event-time'>"+z(Q(s.start,s.end,T("timeFormat")))+"</span>"),e+="<span class='fc-event-title'>"+z(s.title||"")+"</span>"+"</div>",t.isEnd&&I(s)&&(e+="<div class='ui-resizable-handle ui-resizable-"+(i?"w":"e")+"'>"+"&nbsp;&nbsp;&nbsp;"+"</div>"),e+="</"+(n?"a":"div")+">"}function c(e,i){for(var s=0;e.length>s;s++){var n=e[s],r=n.event,a=i.eq(s),o=S("eventRender",r,r,a);o===!1?a.remove():(o&&o!==!0&&(o=t(o).css({position:"absolute",left:n.left}),a.replaceWith(o),a=o),n.element=a)}}function u(t,e){var i=p(t),s=b(),n=[];if(e)for(var r=0;s.length>r;r++)s[r].height(i[r]);for(var r=0;s.length>r;r++)n.push(s[r].position().top);fe(t,function(t,e){e.css("top",n[t.row]+t.top)})}function p(t){for(var e=N(),i=W(),s=[],n=g(t),r=0;e>r;r++){for(var a=n[r],o=[],l=0;i>l;l++)o.push(0);for(var h=0;a.length>h;h++){var c=a[h];c.top=E(o.slice(c.leftCol,c.rightCol+1));for(var l=c.leftCol;c.rightCol>=l;l++)o[l]=c.top+c.outerHeight}s.push(E(o))}return s}function g(t){var e,i,s,n=N(),r=[];for(e=0;t.length>e;e++)i=t[e],s=i.row,i.element&&(r[s]?r[s].push(i):r[s]=[i]);for(s=0;n>s;s++)r[s]=m(r[s]||[]);return r}function m(t){for(var e=[],i=v(t),s=0;i.length>s;s++)e.push.apply(e,i[s]);return e}function v(t){t.sort(ge);for(var e=[],i=0;t.length>i;i++){for(var s=t[i],n=0;e.length>n&&pe(s,e[n]);n++);e[n]?e[n].push(s):e[n]=[s]}return e}function b(){var t,e=N(),i=[];for(t=0;e>t;t++)i[t]=B(t).find("div.fc-day-content > div");return i}function _(t,e){var i=V();fe(t,function(t,i,s){var n=t.event;n._id===e?y(n,i,t):i[0]._fci=s}),C(i,t,y)}function y(t,e,i){j(t)&&D.draggableDayEvent(t,e,i),i.isEnd&&I(t)&&D.resizableDayEvent(t,e,i),F(t,e)}function w(t,e){var i,s=te();e.draggable({delay:50,opacity:T("dragOpacity"),revertDuration:T("dragRevertDuration"),start:function(n,r){S("eventDragStart",e,t,n,r),R(t,e),s.start(function(s,n,r,a){if(e.draggable("option","revert",!s||!r&&!a),J(),s){var o=ie(n),h=ie(s);i=f(h,o),K(l(d(t.start),i),l(x(t),i))}else i=0},n,"drag")},stop:function(n,r){s.stop(),J(),S("eventDragStop",e,t,n,r),i?H(this,t,i,0,t.allDay,n,r):(e.css("filter",""),A(t,e))}})}function k(e,s,n){var r=T("isRTL"),a=r?"w":"e",o=s.find(".ui-resizable-"+a),h=!1;L(s),s.mousedown(function(t){t.preventDefault()}).click(function(t){h&&(t.preventDefault(),t.stopImmediatePropagation())}),o.mousedown(function(r){function o(i){S("eventResizeStop",this,e,i),t("body").css("cursor",""),c.stop(),J(),u&&O(this,e,u,0,i),setTimeout(function(){h=!1},0)}if(1==r.which){h=!0;var c=te();N(),W();var u,d,p=s.css("top"),f=t.extend({},e),g=ae(re(e.start));Z(),t("body").css("cursor",a+"-resize").one("mouseup",o),S("eventResizeStart",this,e,r),c.start(function(s,r){if(s){var o=se(r),h=se(s);if(h=Math.max(h,g),u=ne(h)-ne(o)){f.end=l(P(e),u,!0);var c=d;d=i(f,n.row,p),d=t(d),d.find("*").css("cursor",a+"-resize"),c&&c.remove(),R(e)}else d&&(A(e),d.remove(),d=null);J(),K(e.start,l(x(e),u))}},r)}})}var D=this;D.renderDayEvents=e,D.draggableDayEvent=w,D.resizableDayEvent=k;var T=D.opt,S=D.trigger,j=D.isEventDraggable,I=D.isEventResizable,P=D.eventEnd,q=D.reportEventElement,F=D.eventElementHandlers,A=D.showEvents,R=D.hideEvents,H=D.eventDrop,O=D.eventResize,N=D.getRowCnt,W=D.getColCnt;D.getColWidth;var B=D.allDayRow,Y=D.colLeft,G=D.colRight,U=D.colContentLeft,X=D.colContentRight;D.dateToCell;var V=D.getDaySegmentContainer,Q=D.calendar.formatDates,K=D.renderDayOverlay,J=D.clearOverlays,Z=D.clearSelection,te=D.getHoverListener,ee=D.rangeToSegments,ie=D.cellToDate,se=D.cellToCellOffset,ne=D.cellOffsetToDayOffset,re=D.dateToDayOffset,ae=D.dayOffsetToCellOffset}function pe(t,e){for(var i=0;e.length>i;i++){var s=e[i];if(s.leftCol<=t.rightCol&&s.rightCol>=t.leftCol)return!0}return!1}function fe(t,e){for(var i=0;t.length>i;i++){var s=t[i],n=s.element;n&&e(s,n,i)}}function ge(t,e){return e.rightCol-e.leftCol-(t.rightCol-t.leftCol)||e.event.allDay-t.event.allDay||t.event.start-e.event.start||(t.event.title||"").localeCompare(e.event.title)}function me(){function e(t,e,n){i(),e||(e=l(t,n)),h(t,e,n),s(t,e,n)}function i(t){u&&(u=!1,c(),o("unselect",null,t))}function s(t,e,i,s){u=!0,o("select",null,t,e,i,s)}function n(e){var n=r.cellToDate,o=r.getIsCellAllDay,l=r.getHoverListener(),u=r.reportDayClick;if(1==e.which&&a("selectable")){i(e);var d;l.start(function(t,e){c(),t&&o(t)?(d=[n(e),n(t)].sort(H),h(d[0],d[1],!0)):d=null},e),t(document).one("mouseup",function(t){l.stop(),d&&(+d[0]==+d[1]&&u(d[0],!0,t),s(d[0],d[1],!0,t))})}}var r=this;r.select=e,r.unselect=i,r.reportSelection=s,r.daySelectionMousedown=n;var a=r.opt,o=r.trigger,l=r.defaultSelectionEnd,h=r.renderSelection,c=r.clearSelection,u=!1;a("selectable")&&a("unselectAuto")&&t(document).mousedown(function(e){var s=a("unselectCancel");s&&t(e.target).parents(s).length||i(e)})}function ve(){function e(e,i){var s=r.shift();return s||(s=t("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),s[0].parentNode!=i[0]&&s.appendTo(i),n.push(s.css(e).show()),s}function i(){for(var t;t=n.shift();)r.push(t.hide().unbind())}var s=this;s.renderOverlay=e,s.clearOverlays=i;var n=[],r=[]}function be(t){var e,i,s=this;s.build=function(){e=[],i=[],t(e,i)},s.cell=function(t,s){var n,r=e.length,a=i.length,o=-1,l=-1;for(n=0;r>n;n++)if(s>=e[n][0]&&e[n][1]>s){o=n;break}for(n=0;a>n;n++)if(t>=i[n][0]&&i[n][1]>t){l=n;break}return o>=0&&l>=0?{row:o,col:l}:null},s.rect=function(t,s,n,r,a){var o=a.offset();return{top:e[t][0]-o.top,left:i[s][0]-o.left,width:i[r][1]-i[s][0],height:e[n][1]-e[t][0]}}}function _e(e){function i(t){ye(t);var i=e.cell(t.pageX,t.pageY);(!i!=!a||i&&(i.row!=a.row||i.col!=a.col))&&(i?(r||(r=i),n(i,r,i.row-r.row,i.col-r.col)):n(i,r),a=i)}var s,n,r,a,o=this;o.start=function(o,l,h){n=o,r=a=null,e.build(),i(l),s=h||"mousemove",t(document).bind(s,i)},o.stop=function(){return t(document).unbind(s,i),a}}function ye(t){t.pageX===e&&(t.pageX=t.originalEvent.pageX,t.pageY=t.originalEvent.pageY)}function we(t){function i(e){return n[e]=n[e]||t(e)}var s=this,n={},r={},a={};s.left=function(t){return r[t]=r[t]===e?i(t).position().left:r[t]},s.right=function(t){return a[t]=a[t]===e?s.left(t)+i(t).width():a[t]},s.clear=function(){n={},r={},a={}}}var xe={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},ke={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Ce=t.fullCalendar={version:"1.6.4"},De=Ce.views={};t.fn.fullCalendar=function(i){if("string"==typeof i){var n,r=Array.prototype.slice.call(arguments,1);return this.each(function(){var s=t.data(this,"fullCalendar");if(s&&t.isFunction(s[i])){var a=s[i].apply(s,r);n===e&&(n=a),"destroy"==i&&t.removeData(this,"fullCalendar")}}),n!==e?n:this}i=i||{};var a=i.eventSources||[];return delete i.eventSources,i.events&&(a.push(i.events),delete i.events),i=t.extend(!0,{},xe,i.isRTL||i.isRTL===e&&xe.isRTL?ke:{},i),this.each(function(e,n){var r=t(n),o=new s(r,i,a);r.data("fullCalendar",o),o.render()}),this},Ce.sourceNormalizers=[],Ce.sourceFetchers=[];var Te={dataType:"json",cache:!1},Me=1;Ce.addDays=l,Ce.cloneDate=d,Ce.parseDate=m,Ce.parseISO8601=v,Ce.parseTime=b,Ce.formatDate=_,Ce.formatDates=y;var Se=["sun","mon","tue","wed","thu","fri","sat"],je=864e5,Ie=36e5,Pe=6e4,qe={s:function(t){return t.getSeconds()},ss:function(t){return O(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return O(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return O(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return O(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return O(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return O(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},t:function(t){return 12>t.getHours()?"a":"p"},tt:function(t){return 12>t.getHours()?"am":"pm"},T:function(t){return 12>t.getHours()?"A":"P"},TT:function(t){return 12>t.getHours()?"AM":"PM"},u:function(t){return _(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){var e=t.getDate();return e>10&&20>e?"th":["st","nd","rd"][e%10-1]||"th"},w:function(t,e){return e.weekNumberCalculation(t)},W:function(t){return w(t)}};Ce.dateFormatters=qe,Ce.applyAll=B,De.month=G,De.basicWeek=U,De.basicDay=X,i({weekMode:"fixed"}),De.agendaWeek=K,De.agendaDay=J,i({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})})(jQuery);