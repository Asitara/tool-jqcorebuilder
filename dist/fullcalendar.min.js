/*! Eqdkp-Plus - v1.1.0pre - 2013-03-16
* http://eqdkp-plus.com
* Copyright (c) 2013 Eqdkp-Plus dev team;
 Licensed CC-BY-NC-SA-3.0 */
(function(t,e){function i(e){t.extend(!0,ve,e)}function s(i,s,h){function c(t){J?(C(),k(),q(),y(t)):u()}function u(){Z=s.theme?"ui":"fc",i.addClass("fc"),s.isRTL&&i.addClass("fc-rtl"),s.theme&&i.addClass("ui-widget"),J=t("<div class='fc-content' style='position:relative'/>").prependTo(i),V=new n(Q,s),K=V.render(),K&&i.prepend(K),b(s.defaultView),t(window).resize(T),v()||p()}function p(){setTimeout(function(){!te.start&&v()&&y()},0)}function f(){t(window).unbind("resize",T),V.destroy(),J.remove(),i.removeClass("fc fc-rtl ui-widget")}function g(){return 0!==oe.offsetWidth}function v(){return 0!==t("body")[0].offsetWidth}function b(e){if(!te||e!=te.name){ce++,A();var i,s=te;s?((s.beforeHide||L)(),N(J,J.height()),s.element.hide()):N(J,1),J.css("overflow","hidden"),te=le[e],te?te.element.show():te=le[e]=new _e[e](i=se=t("<div class='fc-view fc-view-"+e+"' style='position:absolute'/>").appendTo(J),Q),s&&V.deactivateButton(s.name),V.activateButton(e),y(),J.css("overflow",""),s&&N(J,1),i||(te.afterShow||L)(),ce--}}function y(t){if(g()){ce++,A(),ie===e&&C();var s=!1;!te.start||t||te.start>ue||ue>=te.end?(te.render(ue,t||0),D(!0),s=!0):te.sizeDirty?(te.clearEvents(),D(),s=!0):te.eventsDirty&&(te.clearEvents(),s=!0),te.sizeDirty=!1,te.eventsDirty=!1,M(s),ee=i.outerWidth(),V.updateTitle(te.title);var n=new Date;n>=te.start&&te.end>n?V.disableButton("today"):V.enableButton("today"),ce--,te.trigger("viewDisplay",oe)}}function x(){k(),g()&&(C(),D(),A(),te.clearEvents(),te.renderEvents(de),te.sizeDirty=!1)}function k(){t.each(le,function(t,e){e.sizeDirty=!0})}function C(){ie=s.contentHeight?s.contentHeight:s.height?s.height-(K?K.height():0)-H(J):Math.round(J.width()/Math.max(s.aspectRatio,.5))}function D(t){ce++,te.setHeight(ie,t),se&&(se.css("position","relative"),se=null),te.setWidth(J.width(),t),ce--}function T(){if(!ce)if(te.start){var t=++he;setTimeout(function(){t==he&&!ce&&g()&&ee!=(ee=i.outerWidth())&&(ce++,x(),te.trigger("windowResize",oe),ce--)},200)}else p()}function M(t){!s.lazyFetching||re(te.visStart,te.visEnd)?S():t&&P()}function S(){ae(te.visStart,te.visEnd)}function j(t){de=t,P()}function I(t){P(t)}function P(t){q(),g()&&(te.clearEvents(),te.renderEvents(de,t),te.eventsDirty=!1)}function q(){t.each(le,function(t,e){e.eventsDirty=!0})}function F(t,i,s){te.select(t,i,s===e?!0:s)}function A(){te&&te.unselect()}function E(){y(-1)}function R(){y(1)}function O(){a(ue,-1),y()}function z(){a(ue,1),y()}function W(){ue=new Date,y()}function $(t,e,i){t instanceof Date?ue=d(t):m(ue,t,e,i),y()}function B(t,i,s){t!==e&&a(ue,t),i!==e&&o(ue,i),s!==e&&l(ue,s),y()}function Y(){return d(ue)}function G(){return te}function X(t,i){return i===e?s[t]:(("height"==t||"contentHeight"==t||"aspectRatio"==t)&&(s[t]=i,x()),e)}function U(t,i){return s[t]?s[t].apply(i||oe,Array.prototype.slice.call(arguments,2)):e}var Q=this;Q.options=s,Q.render=c,Q.destroy=f,Q.refetchEvents=S,Q.reportEvents=j,Q.reportEventChange=I,Q.rerenderEvents=P,Q.changeView=b,Q.select=F,Q.unselect=A,Q.prev=E,Q.next=R,Q.prevYear=O,Q.nextYear=z,Q.today=W,Q.gotoDate=$,Q.incrementDate=B,Q.formatDate=function(t,e){return _(t,e,s)},Q.formatDates=function(t,e,i){return w(t,e,i,s)},Q.getDate=Y,Q.getView=G,Q.option=X,Q.trigger=U,r.call(Q,s,h);var V,K,J,Z,te,ee,ie,se,ne,re=Q.isFetchNeeded,ae=Q.fetchEvents,oe=i[0],le={},he=0,ce=0,ue=new Date,de=[];m(ue,s.year,s.month,s.date),s.droppable&&t(document).bind("dragstart",function(e,i){var n=e.target,r=t(n);if(!r.parents(".fc").length){var a=s.dropAccept;(t.isFunction(a)?a.call(n,r):r.is(a))&&(ne=n,te.dragStart(ne,e,i))}}).bind("dragstop",function(t,e){ne&&(te.dragStop(ne,t,e),ne=null)})}function n(i,s){function n(){p=s.theme?"ui":"fc";var i=s.header;return i?f=t("<table class='fc-header' style='width:100%'/>").append(t("<tr/>").append(a("left")).append(a("center")).append(a("right"))):e}function r(){f.remove()}function a(e){var n=t("<td class='fc-header-"+e+"'/>"),r=s.header[e];return r&&t.each(r.split(" "),function(e){e>0&&n.append("<span class='fc-header-space'/>");var r;t.each(this.split(","),function(e,a){if("title"==a)n.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),r&&r.addClass(p+"-corner-right"),r=null;else{var o;if(i[a]?o=i[a]:_e[a]&&(o=function(){c.removeClass(p+"-state-hover"),i.changeView(a)}),o){var l=s.theme?B(s.buttonIcons,a):null,h=B(s.buttonText,a),c=t("<span class='fc-button fc-button-"+a+" "+p+"-state-default'>"+"<span class='fc-button-inner'>"+"<span class='fc-button-content'>"+(l?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+l+"'/>"+"</span>":h)+"</span>"+"<span class='fc-button-effect'><span></span></span>"+"</span>"+"</span>");c&&(c.click(function(){c.hasClass(p+"-state-disabled")||o()}).mousedown(function(){c.not("."+p+"-state-active").not("."+p+"-state-disabled").addClass(p+"-state-down")}).mouseup(function(){c.removeClass(p+"-state-down")}).hover(function(){c.not("."+p+"-state-active").not("."+p+"-state-disabled").addClass(p+"-state-hover")},function(){c.removeClass(p+"-state-hover").removeClass(p+"-state-down")}).appendTo(n),r||c.addClass(p+"-corner-left"),r=c)}}}),r&&r.addClass(p+"-corner-right")}),n}function o(t){f.find("h2").html(t)}function l(t){f.find("span.fc-button-"+t).addClass(p+"-state-active")}function h(t){f.find("span.fc-button-"+t).removeClass(p+"-state-active")}function c(t){f.find("span.fc-button-"+t).addClass(p+"-state-disabled")}function u(t){f.find("span.fc-button-"+t).removeClass(p+"-state-disabled")}var d=this;d.render=n,d.destroy=r,d.updateTitle=o,d.activateButton=l,d.deactivateButton=h,d.disableButton=c,d.enableButton=u;var p,f=t([])}function r(i,s){function n(t,e){return!C||C>t||e>D}function r(t,e){C=t,D=e,A=[];var i=++P,s=I.length;q=s;for(var n=0;s>n;n++)a(I[n],i)}function a(t,e){o(t,function(i){if(e==P){if(i){for(var s=0;i.length>s;s++)i[s].source=t,y(i[s]);A=A.concat(i)}q--,q||S(A)}})}function o(s,n){var r,a,l=ye.sourceFetchers;for(r=0;l.length>r;r++){if(a=l[r](s,C,D,n),a===!0)return;if("object"==typeof a)return o(a,n),e}var h=s.events;if(h)t.isFunction(h)?(m(),h(d(C),d(D),function(t){n(t),b()})):t.isArray(h)?n(h):n();else{var c=s.url;if(c){var u=s.success,p=s.error,f=s.complete,g=t.extend({},s.data||{}),v=J(s.startParam,i.startParam),y=J(s.endParam,i.endParam);v&&(g[v]=Math.round(+C/1e3)),y&&(g[y]=Math.round(+D/1e3)),m(),t.ajax(t.extend({},we,s,{data:g,success:function(e){e=e||[];var i=K(u,this,arguments);t.isArray(i)&&(e=i),n(e)},error:function(){K(p,this,arguments),n()},complete:function(){K(f,this,arguments),b()}}))}else n()}}function l(t){t=h(t),t&&(q++,a(t,P))}function h(i){return t.isFunction(i)||t.isArray(i)?i={events:i}:"string"==typeof i&&(i={url:i}),"object"==typeof i?(_(i),I.push(i),i):e}function c(e){I=t.grep(I,function(t){return!w(t,e)}),A=t.grep(A,function(t){return!w(t.source,e)}),S(A)}function u(t){var e,i,s=A.length,n=M().defaultEventEnd,r=t.start-t._start,a=t.end?t.end-(t._end||n(t)):0;for(e=0;s>e;e++)i=A[e],i._id==t._id&&i!=t&&(i.start=new Date(+i.start+r),i.end=t.end?i.end?new Date(+i.end+a):new Date(+n(i)+a):null,i.title=t.title,i.url=t.url,i.allDay=t.allDay,i.className=t.className,i.editable=t.editable,i.color=t.color,i.backgroudColor=t.backgroudColor,i.borderColor=t.borderColor,i.textColor=t.textColor,y(i));y(t),S(A)}function p(t,e){y(t),t.source||(e&&(j.events.push(t),t.source=j),A.push(t)),S(A)}function f(e){if(e){if(!t.isFunction(e)){var i=e+"";e=function(t){return t._id==i}}A=t.grep(A,e,!0);for(var s=0;I.length>s;s++)t.isArray(I[s].events)&&(I[s].events=t.grep(I[s].events,e,!0))}else{A=[];for(var s=0;I.length>s;s++)t.isArray(I[s].events)&&(I[s].events=[])}S(A)}function g(e){return t.isFunction(e)?t.grep(A,e):e?(e+="",t.grep(A,function(t){return t._id==e})):A}function m(){F++||T("loading",null,!0)}function b(){--F||T("loading",null,!1)}function y(t){var s=t.source||{},n=J(s.ignoreTimezone,i.ignoreTimezone);t._id=t._id||(t.id===e?"_fc"+xe++:t.id+""),t.date&&(t.start||(t.start=t.date),delete t.date),t._start=d(t.start=v(t.start,n)),t.end=v(t.end,n),t.end&&t.end<=t.start&&(t.end=null),t._end=t.end?d(t.end):null,t.allDay===e&&(t.allDay=J(s.allDayDefault,i.allDayDefault)),t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[]}function _(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=ye.sourceNormalizers,i=0;e.length>i;i++)e[i](t)}function w(t,e){return t&&e&&x(t)==x(e)}function x(t){return("object"==typeof t?t.events||t.url:"")||t}var k=this;k.isFetchNeeded=n,k.fetchEvents=r,k.addEventSource=l,k.removeEventSource=c,k.updateEvent=u,k.renderEvent=p,k.removeEvents=f,k.clientEvents=g,k.normalizeEvent=y;for(var C,D,T=k.trigger,M=k.getView,S=k.reportEvents,j={events:[]},I=[j],P=0,q=0,F=0,A=[],H=0;s.length>H;H++)h(s[H])}function a(t,e,i){return t.setFullYear(t.getFullYear()+e),i||u(t),t}function o(t,e,i){if(+t){var s=t.getMonth()+e,n=d(t);for(n.setDate(1),n.setMonth(s),t.setMonth(s),i||u(t);t.getMonth()!=n.getMonth();)t.setDate(t.getDate()+(n>t?1:-1))}return t}function l(t,e,i){if(+t){var s=t.getDate()+e,n=d(t);n.setHours(9),n.setDate(s),t.setDate(s),i||u(t),h(t,n)}return t}function h(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(e>t?1:-1)*De)}function c(t,e){return t.setMinutes(t.getMinutes()+e),t}function u(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function d(t,e){return e?u(new Date(+t)):new Date(+t)}function p(){var t,e=0;do t=new Date(1970,e++,1);while(t.getHours());return t}function f(t,e,i){for(e=e||1;!t.getDay()||i&&1==t.getDay()||!i&&6==t.getDay();)l(t,e);return t}function g(t,e){return Math.round((d(t,!0)-d(e,!0))/Ce)}function m(t,i,s,n){i!==e&&i!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(i)),s!==e&&s!=t.getMonth()&&(t.setDate(1),t.setMonth(s)),n!==e&&t.setDate(n)}function v(t,i){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):(i===e&&(i=!0),b(t,i)||(t?new Date(t):null)):null}function b(t,e){var i=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!i)return null;var s=new Date(i[1],0,1);if(e||!i[13]){var n=new Date(i[1],0,1,9,0);i[3]&&(s.setMonth(i[3]-1),n.setMonth(i[3]-1)),i[5]&&(s.setDate(i[5]),n.setDate(i[5])),h(s,n),i[7]&&s.setHours(i[7]),i[8]&&s.setMinutes(i[8]),i[10]&&s.setSeconds(i[10]),i[12]&&s.setMilliseconds(1e3*Number("0."+i[12])),h(s,n)}else if(s.setUTCFullYear(i[1],i[3]?i[3]-1:0,i[5]||1),s.setUTCHours(i[7]||0,i[8]||0,i[10]||0,i[12]?1e3*Number("0."+i[12]):0),i[14]){var r=60*Number(i[16])+(i[18]?Number(i[18]):0);r*="-"==i[15]?1:-1,s=new Date(+s+1e3*60*r)}return s}function y(t){if("number"==typeof t)return 60*t;if("object"==typeof t)return 60*t.getHours()+t.getMinutes();var e=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(e){var i=parseInt(e[1],10);return e[3]&&(i%=12,"p"==e[3].toLowerCase().charAt(0)&&(i+=12)),60*i+(e[2]?parseInt(e[2],10):0)}}function _(t,e,i){return w(t,null,e,i)}function w(t,e,i,s){s=s||ve;var n,r,a,o,l=t,h=e,c=i.length,u="";for(n=0;c>n;n++)if(r=i.charAt(n),"'"==r){for(a=n+1;c>a;a++)if("'"==i.charAt(a)){l&&(u+=a==n+1?"'":i.substring(n+1,a),n=a);break}}else if("("==r){for(a=n+1;c>a;a++)if(")"==i.charAt(a)){var d=_(l,i.substring(n+1,a),s);parseInt(d.replace(/\D/,""),10)&&(u+=d),n=a;break}}else if("["==r){for(a=n+1;c>a;a++)if("]"==i.charAt(a)){var p=i.substring(n+1,a),d=_(l,p,s);d!=_(h,p,s)&&(u+=d),n=a;break}}else if("{"==r)l=e,h=t;else if("}"==r)l=t,h=e;else{for(a=c;a>n;a--)if(o=Me[i.substring(n,a)]){l&&(u+=o(l,s)),n=a-1;break}a==n&&l&&(u+=r)}return u}function x(t){return t.end?k(t.end,t.allDay):l(d(t.start),1)}function k(t,e){return t=d(t),e||t.getHours()||t.getMinutes()?l(t,1):u(t)}function C(t,e){return 100*(e.msLength-t.msLength)+(t.event.start-e.event.start)}function D(t,e){return t.end>e.start&&t.start<e.end}function T(t,e,i,s){var n,r,a,o,l,h,c,u,p=[],f=t.length;for(n=0;f>n;n++)r=t[n],a=r.start,o=e[n],o>i&&s>a&&(i>a?(l=d(i),c=!1):(l=a,c=!0),o>s?(h=d(s),u=!1):(h=o,u=!0),p.push({event:r,start:l,end:h,isStart:c,isEnd:u,msLength:h-l}));return p.sort(C)}function M(t){var e,i,s,n,r,a=[],o=t.length;for(e=0;o>e;e++){for(i=t[e],s=0;;){if(n=!1,a[s])for(r=0;a[s].length>r;r++)if(D(a[s][r],i)){n=!0;break}if(!n)break;s++}a[s]?a[s].push(i):a[s]=[i]}return a}function S(i,s,n){i.unbind("mouseover").mouseover(function(i){for(var r,a,o,l=i.target;l!=this;)r=l,l=l.parentNode;(a=r._fci)!==e&&(r._fci=e,o=s[a],n(o.event,o.element,o),t(i.target).trigger(i)),i.stopPropagation()})}function j(e,i,s){for(var n,r=0;e.length>r;r++)n=t(e[r]),n.width(Math.max(0,i-P(n,s)))}function I(e,i,s){for(var n,r=0;e.length>r;r++)n=t(e[r]),n.height(Math.max(0,i-H(n,s)))}function P(t,e){return q(t)+A(t)+(e?F(t):0)}function q(e){return(parseFloat(t.css(e[0],"paddingLeft",!0))||0)+(parseFloat(t.css(e[0],"paddingRight",!0))||0)}function F(e){return(parseFloat(t.css(e[0],"marginLeft",!0))||0)+(parseFloat(t.css(e[0],"marginRight",!0))||0)}function A(e){return(parseFloat(t.css(e[0],"borderLeftWidth",!0))||0)+(parseFloat(t.css(e[0],"borderRightWidth",!0))||0)}function H(t,e){return E(t)+O(t)+(e?R(t):0)}function E(e){return(parseFloat(t.css(e[0],"paddingTop",!0))||0)+(parseFloat(t.css(e[0],"paddingBottom",!0))||0)}function R(e){return(parseFloat(t.css(e[0],"marginTop",!0))||0)+(parseFloat(t.css(e[0],"marginBottom",!0))||0)}function O(e){return(parseFloat(t.css(e[0],"borderTopWidth",!0))||0)+(parseFloat(t.css(e[0],"borderBottomWidth",!0))||0)}function N(t,e){e="number"==typeof e?e+"px":e,t.each(function(t,i){i.style.cssText+=";min-height:"+e+";_height:"+e})}function L(){}function z(t,e){return t-e}function W(t){return Math.max.apply(Math,t)}function $(t){return(10>t?"0":"")+t}function B(t,i){if(t[i]!==e)return t[i];for(var s,n=i.split(/(?=[A-Z])/),r=n.length-1;r>=0;r--)if(s=t[n[r].toLowerCase()],s!==e)return s;return t[""]}function Y(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function G(t){return t.id+"/"+t.className+"/"+t.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/gi,"")}function X(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function U(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function Q(t,e){t.each(function(t,i){i.className=i.className.replace(/^fc-\w*/,"fc-"+ke[e.getDay()])})}function V(t,e){var i=t.source||{},s=t.color,n=i.color,r=e("eventColor"),a=t.backgroundColor||s||i.backgroundColor||n||e("eventBackgroundColor")||r,o=t.borderColor||s||i.borderColor||n||e("eventBorderColor")||r,l=t.textColor||i.textColor||e("eventTextColor"),h=[];return a&&h.push("background-color:"+a),o&&h.push("border-color:"+o),l&&h.push("color:"+l),h.join(";")}function K(e,i,s){if(t.isFunction(e)&&(e=[e]),e){var n,r;for(n=0;e.length>n;n++)r=e[n].apply(i,s)||r;return r}}function J(){for(var t=0;arguments.length>t;t++)if(arguments[t]!==e)return arguments[t]}function Z(t,e){function i(t,e){e&&(o(t,e),t.setDate(1));var i=d(t,!0);i.setDate(1);var h=o(d(i),1),c=d(i),u=d(h),p=n("firstDay"),g=n("weekends")?0:1;g&&(f(c),f(u,-1,!0)),l(c,-((c.getDay()-Math.max(p,g)+7)%7)),l(u,(7-u.getDay()+Math.max(p,g))%7);var m=Math.round((u-c)/(7*Ce));"fixed"==n("weekMode")&&(l(u,7*(6-m)),m=6),s.title=a(i,n("titleFormat")),s.start=i,s.end=h,s.visStart=c,s.visEnd=u,r(6,m,g?5:7,!0)}var s=this;s.render=i,ie.call(s,t,e,"month");var n=s.opt,r=s.renderBasic,a=e.formatDate}function te(t,e){function i(t,e){e&&l(t,7*e);var i=l(d(t),-((t.getDay()-n("firstDay")+7)%7)),o=l(d(i),7),h=d(i),c=d(o),u=n("weekends");u||(f(h),f(c,-1,!0)),s.title=a(h,l(d(c),-1),n("titleFormat")),s.start=i,s.end=o,s.visStart=h,s.visEnd=c,r(1,1,u?7:5,!1)}var s=this;s.render=i,ie.call(s,t,e,"basicWeek");var n=s.opt,r=s.renderBasic,a=e.formatDates}function ee(t,e){function i(t,e){e&&(l(t,e),n("weekends")||f(t,0>e?-1:1)),s.title=a(t,n("titleFormat")),s.start=s.visStart=d(t,!0),s.end=s.visEnd=l(d(s.start),1),r(1,1,1,!1)}var s=this;s.render=i,ie.call(s,t,e,"basicDay");var n=s.opt,r=s.renderBasic,a=e.formatDate}function ie(e,i,s){function n(t,e,i,s){J=e,Z=i,r();var n=!L;n?a(t,s):ye(),o(n)}function r(){ne=ve("isRTL"),ne?(re=-1,ae=Z-1):(re=1,ae=0),oe=ve("firstDay"),le=ve("weekends")?0:1,ce=ve("theme")?"ui":"fc",ge=ve("columnFormat")}function a(i,s){var n,r,a,o,l=ce+"-widget-header",h=ce+"-widget-content";for(n="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>",r=0;Z>r;r++)n+="<th class='fc- "+l+"'/>";for(n+="</tr></thead><tbody>",r=0;i>r;r++){for(n+="<tr class='fc-week"+r+"'>",a=0;Z>a;a++)n+="<td class='fc- "+h+" fc-day"+(r*Z+a)+"'>"+"<div>"+(s?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>";n+="</tr>"}n+="</tbody></table>",o=t(n).appendTo(e),R=o.find("thead"),O=R.find("th"),L=o.find("tbody"),z=L.find("tr"),W=L.find("td"),$=W.filter(":first-child"),B=z.eq(0).find("div.fc-day-content div"),U(R.add(R.find("tr"))),U(z),z.eq(0).addClass("fc-first"),p(W),Y=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(e)}function o(e){var i,s,n,r=e||1==J,a=E.start.getMonth(),o=u(new Date);r&&O.each(function(e,n){i=t(n),s=P(e),i.html(ke(s,ge)),Q(i,s)}),W.each(function(e,n){i=t(n),s=P(e),s.getMonth()==a?i.removeClass("fc-other-month"):i.addClass("fc-other-month"),+s==+o?i.addClass(ce+"-state-highlight fc-today"):i.removeClass(ce+"-state-highlight fc-today"),i.find("div.fc-day-number").text(s.getDate()),r&&Q(i,s)}),z.each(function(e,i){n=t(i),J>e?(n.show(),e==J-1?n.addClass("fc-last"):n.removeClass("fc-last")):n.hide()})}function h(e){V=e;var i,s,n,r=V-R.height();"variable"==ve("weekMode")?i=s=Math.floor(r/(1==J?2:6)):(i=Math.floor(r/J),s=r-i*(J-1)),$.each(function(e,r){J>e&&(n=t(r),N(n.find("> div"),(e==J-1?s:i)-H(n)))})}function c(t){G=t,ie.clear(),K=Math.floor(G/Z),j(O.slice(0,-1),K)}function p(t){t.click(f).mousedown(xe)}function f(t){if(!ve("selectable")){var e=parseInt(this.className.match(/fc\-day(\d+)/)[1]),i=P(e);be("dayClick",this,i,!0,t)}}function m(t,e,i){i&&te.build();for(var s=d(E.visStart),n=l(d(s),Z),r=0;J>r;r++){var a=new Date(Math.max(s,t)),o=new Date(Math.min(n,e));if(o>a){var h,c;ne?(h=g(o,s)*re+ae+1,c=g(a,s)*re+ae+1):(h=g(a,s),c=g(o,s)),p(v(r,h,r,c-1))}l(s,7),l(n,7)}}function v(t,i,s,n){var r=te.rect(t,i,s,n,e);return _e(r,e)}function b(t){return d(t)}function y(t,e){m(t,l(d(e),1),!0)}function _(){we()}function w(t,e,i){var s=M(t),n=W[s.row*Z+s.col];be("dayClick",n,t,e,i)}function x(t,e){ee.start(function(t){we(),t&&v(t.row,t.col,t.row,t.col)},e)}function k(t,e,i){var s=ee.stop();if(we(),s){var n=S(s);be("drop",t,n,!0,e,i)}}function C(t){return d(t.start)}function D(t){return ie.left(t)}function T(t){return ie.right(t)}function M(t){return{row:Math.floor(g(t,E.visStart)/7),col:q(t.getDay())}}function S(t){return I(t.row,t.col)}function I(t,e){return l(d(E.visStart),7*t+e*re+ae)}function P(t){return I(Math.floor(t/Z),t%Z)}function q(t){return(t-Math.max(oe,le)+Z)%Z*re+ae}function F(t){return z.eq(t)}function A(){return{left:0,right:G}}var E=this;E.renderBasic=n,E.setHeight=h,E.setWidth=c,E.renderDayOverlay=m,E.defaultSelectionEnd=b,E.renderSelection=y,E.clearSelection=_,E.reportDayClick=w,E.dragStart=x,E.dragStop=k,E.defaultEventEnd=C,E.getHoverListener=function(){return ee},E.colContentLeft=D,E.colContentRight=T,E.dayOfWeekCol=q,E.dateCell=M,E.cellDate=S,E.cellIsAllDay=function(){return!0},E.allDayRow=F,E.allDayBounds=A,E.getRowCnt=function(){return J},E.getColCnt=function(){return Z},E.getColWidth=function(){return K},E.getDaySegmentContainer=function(){return Y},he.call(E,e,i,s),de.call(E),ue.call(E),se.call(E);var R,O,L,z,W,$,B,Y,G,V,K,J,Z,te,ee,ie,ne,re,ae,oe,le,ce,ge,ve=E.opt,be=E.trigger,ye=E.clearEvents,_e=E.renderOverlay,we=E.clearOverlays,xe=E.daySelectionMousedown,ke=i.formatDate;X(e.addClass("fc-grid")),te=new pe(function(e,i){var s,n,r;O.each(function(e,a){s=t(a),n=s.offset().left,e&&(r[1]=n),r=[n],i[e]=r}),r[1]=n+s.outerWidth(),z.each(function(i,a){J>i&&(s=t(a),n=s.offset().top,i&&(r[1]=n),r=[n],e[i]=r)}),r[1]=n+s.outerHeight()}),ee=new fe(te),ie=new me(function(t){return B.eq(t)})}function se(){function e(t,e){p(t),S(s(t),e)}function i(){f(),y().empty()}function s(e){var i,s,n,r,o,h,c=C(),u=D(),p=d(a.visStart),f=l(d(p),u),g=t.map(e,x),m=[];for(i=0;c>i;i++){for(s=M(T(e,g,p,f)),n=0;s.length>n;n++)for(r=s[n],o=0;r.length>o;o++)h=r[o],h.row=i,h.level=n,m.push(h);l(p,7),l(f,7)}return m}function n(t,e,i){c(t)&&r(t,e),i.isEnd&&u(t)&&j(t,e,i),g(t,e)}function r(t,e){var i,s=_();e.draggable({zIndex:9,delay:50,opacity:o("dragOpacity"),revertDuration:o("dragRevertDuration"),start:function(n,r){h("eventDragStart",e,t,n,r),v(t,e),s.start(function(s,n,r,a){e.draggable("option","revert",!s||!r&&!a),k(),s?(i=7*r+a*(o("isRTL")?-1:1),w(l(d(t.start),i),l(x(t),i))):i=0},n,"drag")},stop:function(n,r){s.stop(),k(),h("eventDragStop",e,t,n,r),i?b(this,t,i,0,t.allDay,n,r):(e.css("filter",""),m(t,e))}})}var a=this;a.renderEvents=e,a.compileDaySegs=s,a.clearEvents=i,a.bindDaySeg=n,ce.call(a);var o=a.opt,h=a.trigger,c=a.isEventDraggable,u=a.isEventResizable,p=a.reportEvents,f=a.reportEventClear,g=a.eventElementHandlers,m=a.showEvents,v=a.hideEvents,b=a.eventDrop,y=a.getDaySegmentContainer,_=a.getHoverListener,w=a.renderDayOverlay,k=a.clearOverlays,C=a.getRowCnt,D=a.getColCnt,S=a.renderDaySegs,j=a.resizableDayEvent}function ne(t,e){function i(t,e){e&&l(t,7*e);var i=l(d(t),-((t.getDay()-n("firstDay")+7)%7)),o=l(d(i),7),h=d(i),c=d(o),u=n("weekends");u||(f(h),f(c,-1,!0)),s.title=a(h,l(d(c),-1),n("titleFormat")),s.start=i,s.end=o,s.visStart=h,s.visEnd=c,r(u?7:5)}var s=this;s.render=i,ae.call(s,t,e,"agendaWeek");var n=s.opt,r=s.renderAgenda,a=e.formatDates}function re(t,e){function i(t,e){e&&(l(t,e),n("weekends")||f(t,0>e?-1:1));var i=d(t,!0),o=l(d(i),1);s.title=a(t,n("titleFormat")),s.start=s.visStart=i,s.end=s.visEnd=o,r(1)}var s=this;s.render=i,ae.call(s,t,e,"agendaDay");var n=s.opt,r=s.renderAgenda,a=e.formatDate}function ae(i,s,n){function r(t){Ae=t,a(),te?Ve():o(),h()}function a(){Ne=Ue("theme")?"ui":"fc",ze=Ue("weekends")?0:1,Le=Ue("firstDay"),(We=Ue("isRTL"))?($e=-1,Be=Ae-1):($e=1,Be=0),Ye=y(Ue("minTime")),Ge=y(Ue("maxTime")),Xe=Ue("columnFormat")}function o(){var e,s,n,r,a,o=Ne+"-widget-header",l=Ne+"-widget-content",h=0==Ue("slotMinutes")%15;for(e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+o+"'>&nbsp;</th>",s=0;Ae>s;s++)e+="<th class='fc- fc-col"+s+" "+o+"'/>";for(e+="<th class='fc-agenda-gutter "+o+"'>&nbsp;</th>"+"</tr>"+"</thead>"+"<tbody>"+"<tr>"+"<th class='fc-agenda-axis "+o+"'>&nbsp;</th>",s=0;Ae>s;s++)e+="<td class='fc- fc-col"+s+" "+l+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>";for(e+="<td class='fc-agenda-gutter "+l+"'>&nbsp;</td>"+"</tr>"+"</tbody>"+"</table>",te=t(e).appendTo(i),ee=te.find("thead"),ie=ee.find("th").slice(1,-1),se=te.find("tbody"),ne=se.find("td").slice(0,-1),re=ne.find("div.fc-day-content div"),ae=ne.eq(0),le=ae.find("> div"),U(ee.add(ee.find("tr"))),U(se.add(se.find("tr"))),Ce=ee.find("th:first"),De=te.find(".fc-agenda-gutter"),ce=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(i),Ue("allDaySlot")?(ge=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ce),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+o+" fc-agenda-axis'>"+Ue("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+o+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",ve=t(e).appendTo(ce),be=ve.find("tr"),w(be.find("td")),Ce=Ce.add(ve.find("th:first")),De=De.add(ve.find("th.fc-agenda-gutter")),ce.append("<div class='fc-agenda-divider "+o+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):ge=t([]),ye=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ce),_e=t("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(ye),we=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(_e),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",n=p(),r=c(d(n),Ge),c(n,Ye),He=0,s=0;r>n;s++)a=n.getMinutes(),e+="<tr class='fc-slot"+s+" "+(a?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+o+"'>"+(h&&a?"&nbsp;":si(n,Ue("axisFormat")))+"</th>"+"<td class='"+l+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",c(n,Ue("slotMinutes")),He++;e+="</tbody></table>",xe=t(e).appendTo(_e),ke=xe.find("div:first"),x(xe.find("td")),Ce=Ce.add(xe.find("th:first"))}function h(){var t,e,i,s,n=u(new Date);for(t=0;Ae>t;t++)s=F(t),e=ie.eq(t),e.html(si(s,Xe)),i=ne.eq(t),+s==+n?i.addClass(Ne+"-state-highlight fc-today"):i.removeClass(Ne+"-state-highlight fc-today"),Q(e.add(i),s)}function f(t,i){t===e&&(t=Se),Se=t,ni={};var s=se.position().top,n=ye.position().top,r=Math.min(t-s,xe.height()+n+1);le.height(r-H(ae)),ce.css("top",s),ye.height(r-n-1),qe=ke.height()+1,i&&v()}function m(e){Me=e,Oe.clear(),je=0,j(Ce.width("").each(function(e,i){je=Math.max(je,t(i).outerWidth())}),je);var i=ye[0].clientWidth;Pe=ye.width()-i,Pe?(j(De,Pe),De.show().prev().removeClass("fc-last")):De.hide().prev().addClass("fc-last"),Ie=Math.floor((i-je)/Ae),j(ie.slice(0,-1),Ie)}function v(){function t(){ye.scrollTop(s)}var e=p(),i=d(e);i.setHours(Ue("firstHour"));var s=R(e,i)+1;t(),setTimeout(t,0)}function b(){Fe=ye.scrollTop()}function _(){ye.scrollTop(Fe)}function w(t){t.click(k).mousedown(ei)}function x(t){t.click(k).mousedown(G)}function k(t){if(!Ue("selectable")){var e=Math.min(Ae-1,Math.floor((t.pageX-te.offset().left-je)/Ie)),i=F(e),s=this.parentNode.className.match(/fc-slot(\d+)/);if(s){var n=parseInt(s[1])*Ue("slotMinutes"),r=Math.floor(n/60);i.setHours(r),i.setMinutes(n%60+Ye),Qe("dayClick",ne[e],i,!1,t)}else Qe("dayClick",ne[e],i,!0,t)}}function C(t,e,i){i&&Ee.build();var s,n,r=d(Z.visStart);We?(s=g(e,r)*$e+Be+1,n=g(t,r)*$e+Be+1):(s=g(t,r),n=g(e,r)),s=Math.max(0,s),n=Math.min(Ae,n),n>s&&w(D(0,s,0,n-1))}function D(t,e,i,s){var n=Ee.rect(t,e,i,s,ce);return Ke(n,ce)}function T(t,e){for(var i=d(Z.visStart),s=l(d(i),1),n=0;Ae>n;n++){var r=new Date(Math.max(i,t)),a=new Date(Math.min(s,e));if(a>r){var o=n*$e+Be,h=Ee.rect(0,o,0,o,_e),c=R(i,r),u=R(i,a);h.top=c,h.height=u-c,x(Ke(h,_e))}l(i,1),l(s,1)}}function M(t){return Oe.left(t)}function S(t){return Oe.right(t)}function P(t){return{row:Math.floor(g(t,Z.visStart)/7),col:E(t.getDay())}}function q(t){var e=F(t.col),i=t.row;return Ue("allDaySlot")&&i--,i>=0&&c(e,Ye+i*Ue("slotMinutes")),e}function F(t){return l(d(Z.visStart),t*$e+Be)}function A(t){return Ue("allDaySlot")&&!t.row}function E(t){return(t-Math.max(Le,ze)+Ae)%Ae*$e+Be}function R(t,i){if(t=d(t,!0),c(d(t),Ye)>i)return 0;if(i>=c(d(t),Ge))return xe.height();var s=Ue("slotMinutes"),n=60*i.getHours()+i.getMinutes()-Ye,r=Math.floor(n/s),a=ni[r];return a===e&&(a=ni[r]=xe.find("tr:eq("+r+") td div")[0].offsetTop),Math.max(0,Math.round(a-1+qe*(n%s/s)))}function O(){return{left:je,right:Me-Pe}}function N(){return be}function L(t){var e=d(t.start);return t.allDay?e:c(e,Ue("defaultEventMinutes"))}function W(t,e){return e?d(t):c(d(t),Ue("slotMinutes"))}function $(t,e,i){i?Ue("allDaySlot")&&C(t,l(d(e),1),!0):B(t,e)}function B(e,i){var s=Ue("selectHelper");if(Ee.build(),s){var n=g(e,Z.visStart)*$e+Be;if(n>=0&&Ae>n){var r=Ee.rect(0,n,0,n,_e),a=R(e,e),o=R(e,i);if(o>a){if(r.top=a,r.height=o-a,r.left+=2,r.width-=5,t.isFunction(s)){var l=s(e,i);l&&(r.position="absolute",r.zIndex=8,Te=t(l).css(r).appendTo(_e))}else r.isStart=!0,r.isEnd=!0,Te=t(ii({title:"",start:e,end:i,className:["fc-select-helper"],editable:!1},r)),Te.css("opacity",Ue("dragOpacity"));Te&&(x(Te),_e.append(Te),j(Te,r.width,!0),I(Te,r.height,!0))}}}else T(e,i)}function Y(){Je(),Te&&(Te.remove(),Te=null)}function G(e){if(1==e.which&&Ue("selectable")){ti(e);var i;Re.start(function(t,e){if(Y(),t&&t.col==e.col&&!A(t)){var s=q(e),n=q(t);i=[s,c(d(s),Ue("slotMinutes")),n,c(d(n),Ue("slotMinutes"))].sort(z),B(i[0],i[3])}else i=null},e),t(document).one("mouseup",function(t){Re.stop(),i&&(+i[0]==+i[1]&&V(i[0],!1,t),Ze(i[0],i[3],!1,t))})}}function V(t,e,i){Qe("dayClick",ne[E(t.getDay())],t,e,i)}function K(t,e){Re.start(function(t){if(Je(),t)if(A(t))D(t.row,t.col,t.row,t.col);else{var e=q(t),i=c(d(e),Ue("defaultEventMinutes"));T(e,i)}},e)}function J(t,e,i){var s=Re.stop();Je(),s&&Qe("drop",t,q(s),A(s),e,i)}var Z=this;Z.renderAgenda=r,Z.setWidth=m,Z.setHeight=f,Z.beforeHide=b,Z.afterShow=_,Z.defaultEventEnd=L,Z.timePosition=R,Z.dayOfWeekCol=E,Z.dateCell=P,Z.cellDate=q,Z.cellIsAllDay=A,Z.allDayRow=N,Z.allDayBounds=O,Z.getHoverListener=function(){return Re},Z.colContentLeft=M,Z.colContentRight=S,Z.getDaySegmentContainer=function(){return ge},Z.getSlotSegmentContainer=function(){return we},Z.getMinMinute=function(){return Ye},Z.getMaxMinute=function(){return Ge},Z.getBodyContent=function(){return _e},Z.getRowCnt=function(){return 1},Z.getColCnt=function(){return Ae},Z.getColWidth=function(){return Ie},Z.getSlotHeight=function(){return qe},Z.defaultSelectionEnd=W,Z.renderDayOverlay=C,Z.renderSelection=$,Z.clearSelection=Y,Z.reportDayClick=V,Z.dragStart=K,Z.dragStop=J,he.call(Z,i,s,n),de.call(Z),ue.call(Z),oe.call(Z);var te,ee,ie,se,ne,re,ae,le,ce,ge,ve,be,ye,_e,we,xe,ke,Ce,De,Te,Me,Se,je,Ie,Pe,qe,Fe,Ae,He,Ee,Re,Oe,Ne,Le,ze,We,$e,Be,Ye,Ge,Xe,Ue=Z.opt,Qe=Z.trigger,Ve=Z.clearEvents,Ke=Z.renderOverlay,Je=Z.clearOverlays,Ze=Z.reportSelection,ti=Z.unselect,ei=Z.daySelectionMousedown,ii=Z.slotSegHtml,si=s.formatDate,ni={};X(i.addClass("fc-agenda")),Ee=new pe(function(e,i){function s(t){return Math.max(l,Math.min(h,t))}var n,r,a;ie.each(function(e,s){n=t(s),r=n.offset().left,e&&(a[1]=r),a=[r],i[e]=a}),a[1]=r+n.outerWidth(),Ue("allDaySlot")&&(n=be,r=n.offset().top,e[0]=[r,r+n.outerHeight()]);for(var o=_e.offset().top,l=ye.offset().top,h=l+ye.outerHeight(),c=0;He>c;c++)e.push([s(o+qe*c),s(o+qe*(c+1))])}),Re=new fe(Ee),Oe=new me(function(t){return re.eq(t)})}function oe(){function i(t,e){C(t);var i,s=t.length,a=[],l=[];for(i=0;s>i;i++)t[i].allDay?a.push(t[i]):l.push(t[i]);b("allDaySlot")&&(W(n(a),e),q()),o(r(l),e)}function s(){D(),F().empty(),A().empty()}function n(e){var i,s,n,r,a=M(T(e,t.map(e,x),v.visStart,v.visEnd)),o=a.length,l=[];for(i=0;o>i;i++)for(s=a[i],n=0;s.length>n;n++)r=s[n],r.row=0,r.level=i,l.push(r);return l}function r(e){var i,s,n,r,o,h,u=B(),p=O(),f=R(),g=c(d(v.visStart),p),m=t.map(e,a),b=[];for(i=0;u>i;i++){for(s=M(T(e,m,g,c(d(g),f-p))),le(s),n=0;s.length>n;n++)for(r=s[n],o=0;r.length>o;o++)h=r[o],h.col=i,h.level=n,b.push(h);l(g,1,!0)}return b}function a(t){return t.end?d(t.end):c(d(t.start),b("defaultEventMinutes"))}function o(i,s){var n,r,a,o,l,c,u,d,f,g,m,v,_,w,x,k,C,D,T,M,j,I,q=i.length,F="",E={},R={},O=A(),W=B();for((M=b("isRTL"))?(j=-1,I=W-1):(j=1,I=0),n=0;q>n;n++)r=i[n],a=r.event,o=N(r.start,r.start),l=N(r.start,r.end),c=r.col,u=r.level,d=r.forward||0,f=L(c*j+I),g=z(c*j+I)-f,g=Math.min(g-6,.95*g),m=u?g/(u+d+1):d?2*(g/(d+1)-6):g,v=f+g/(u+d+1)*u*j+(M?g-m:0),r.top=o,r.left=v,r.outerWidth=m,r.outerHeight=l-o,F+=h(a,r);for(O[0].innerHTML=F,_=O.children(),n=0;q>n;n++)r=i[n],a=r.event,w=t(_[n]),x=y("eventRender",a,a,w),x===!1?w.remove():(x&&x!==!0&&(w.remove(),w=t(x).css({position:"absolute",top:r.top,left:r.left}).appendTo(O)),r.element=w,a._id===s?p(a,w,r):w[0]._fci=n,K(a,w));for(S(O,i,p),n=0;q>n;n++)r=i[n],(w=r.element)&&(C=E[k=r.key=G(w[0])],r.vsides=C===e?E[k]=H(w,!0):C,C=R[k],r.hsides=C===e?R[k]=P(w,!0):C,D=w.find("div.fc-event-content"),D.length&&(r.contentTop=D[0].offsetTop));for(n=0;q>n;n++)r=i[n],(w=r.element)&&(w[0].style.width=Math.max(0,r.outerWidth-r.hsides)+"px",T=Math.max(0,r.outerHeight-r.vsides),w[0].style.height=T+"px",a=r.event,r.contentTop!==e&&10>T-r.contentTop&&(w.find("div.fc-event-time").text(re(a.start,b("timeFormat"))+" - "+a.title),w.find("div.fc-event-title").remove()),y("eventAfterRender",a,a,w))
}function h(t,e){var i="<",s=t.url,n=V(t,b),r=n?" style='"+n+"'":"",a=["fc-event","fc-event-skin","fc-event-vert"];return _(t)&&a.push("fc-event-draggable"),e.isStart&&a.push("fc-corner-top"),e.isEnd&&a.push("fc-corner-bottom"),a=a.concat(t.className),t.source&&(a=a.concat(t.source.className||[])),i+=s?"a href='"+Y(t.url)+"'":"div",i+=" class='"+a.join(" ")+"'"+" style='position:absolute;z-index:8;top:"+e.top+"px;left:"+e.left+"px;"+n+"'"+">"+"<div class='fc-event-inner fc-event-skin'"+r+">"+"<div class='fc-event-head fc-event-skin'"+r+">"+"<div class='fc-event-time'>"+Y(ae(t.start,t.end,b("timeFormat")))+"</div>"+"</div>"+"<div class='fc-event-content'>"+"<div class='fc-event-title'>"+Y(t.title)+"</div>"+"</div>"+"<div class='fc-event-bg'></div>"+"</div>",e.isEnd&&w(t)&&(i+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),i+="</"+(s?"a":"div")+">"}function u(t,e,i){_(t)&&f(t,e,i.isStart),i.isEnd&&w(t)&&$(t,e,i),j(t,e)}function p(t,e,i){var s=e.find("div.fc-event-time");_(t)&&g(t,e,s),i.isEnd&&w(t)&&m(t,e,s),j(t,e)}function f(t,e,i){function s(){o||(e.width(n).height("").draggable("option","grid",null),o=!0)}var n,r,a,o=!0,h=b("isRTL")?-1:1,c=E(),u=X(),p=U(),f=O();e.draggable({zIndex:9,opacity:b("dragOpacity","month"),revertDuration:b("dragRevertDuration"),start:function(f,g){y("eventDragStart",e,t,f,g),Z(t,e),n=e.width(),c.start(function(n,c,f,g){se(),n?(r=!1,a=g*h,n.row?i?o&&(e.width(u-10),I(e,p*Math.round((t.end?(t.end-t.start)/Te:b("defaultEventMinutes"))/b("slotMinutes"))),e.draggable("option","grid",[u,1]),o=!1):r=!0:(ie(l(d(t.start),a),l(x(t),a)),s()),r=r||o&&!a):(s(),r=!0),e.draggable("option","revert",r)},f,"drag")},stop:function(i,n){if(c.stop(),se(),y("eventDragStop",e,t,i,n),r)s(),e.css("filter",""),J(t,e);else{var l=0;o||(l=Math.round((e.offset().top-Q().offset().top)/p)*b("slotMinutes")+f-(60*t.start.getHours()+t.start.getMinutes())),te(this,t,a,l,o,i,n)}}})}function g(t,e,i){function s(e){var s,n=c(d(t.start),e);t.end&&(s=c(d(t.end),e)),i.text(ae(n,s,b("timeFormat")))}function n(){u&&(i.css("display",""),e.draggable("option","grid",[m,v]),u=!1)}var r,a,o,h,u=!1,p=b("isRTL")?-1:1,f=E(),g=B(),m=X(),v=U();e.draggable({zIndex:9,scroll:!1,grid:[m,v],axis:1==g?"y":!1,opacity:b("dragOpacity"),revertDuration:b("dragRevertDuration"),start:function(s,c){y("eventDragStart",e,t,s,c),Z(t,e),r=e.position(),o=h=0,f.start(function(s,r,o,h){e.draggable("option","revert",!s),se(),s&&(a=h*p,b("allDaySlot")&&!s.row?(u||(u=!0,i.hide(),e.draggable("option","grid",null)),ie(l(d(t.start),a),l(x(t),a))):n())},s,"drag")},drag:function(t,e){o=Math.round((e.position.top-r.top)/v)*b("slotMinutes"),o!=h&&(u||s(o),h=o)},stop:function(i,l){var h=f.stop();se(),y("eventDragStop",e,t,i,l),h&&(a||o||u)?te(this,t,a,u?0:o,u,i,l):(n(),e.css("filter",""),e.css(r),s(0),J(t,e))}})}function m(t,e,i){var s,n,r=U();e.resizable({handles:"s",grid:r,start:function(i,r){s=n=0,Z(t,e),e.css("z-index",9),y("eventResizeStart",this,t,i,r)},resize:function(a,o){s=Math.round((Math.max(r,e.height())-o.originalSize.height)/r),s!=n&&(i.text(ae(t.start,s||t.end?c(k(t),b("slotMinutes")*s):null,b("timeFormat"))),n=s)},stop:function(i,n){y("eventResizeStop",this,t,i,n),s?ee(this,t,0,b("slotMinutes")*s,i,n):(e.css("z-index",8),J(t,e))}})}var v=this;v.renderEvents=i,v.compileDaySegs=n,v.clearEvents=s,v.slotSegHtml=h,v.bindDaySeg=u,ce.call(v);var b=v.opt,y=v.trigger,_=v.isEventDraggable,w=v.isEventResizable,k=v.eventEnd,C=v.reportEvents,D=v.reportEventClear,j=v.eventElementHandlers,q=v.setHeight,F=v.getDaySegmentContainer,A=v.getSlotSegmentContainer,E=v.getHoverListener,R=v.getMaxMinute,O=v.getMinMinute,N=v.timePosition,L=v.colContentLeft,z=v.colContentRight,W=v.renderDaySegs,$=v.resizableDayEvent,B=v.getColCnt,X=v.getColWidth,U=v.getSlotHeight,Q=v.getBodyContent,K=v.reportEventElement,J=v.showEvents,Z=v.hideEvents,te=v.eventDrop,ee=v.eventResize,ie=v.renderDayOverlay,se=v.clearOverlays,ne=v.calendar,re=ne.formatDate,ae=ne.formatDates}function le(t){var e,i,s,n,r,a;for(e=t.length-1;e>0;e--)for(n=t[e],i=0;n.length>i;i++)for(r=n[i],s=0;t[e-1].length>s;s++)a=t[e-1][s],D(r,a)&&(a.forward=Math.max(a.forward||0,(r.forward||0)+1))}function he(t,i,s){function n(t,e){var i=P[t];return"object"==typeof i?B(i,e||s):i}function r(t,e){return i.trigger.apply(i,[t,e||C].concat(Array.prototype.slice.call(arguments,2),[C]))}function a(t){return h(t)&&!n("disableDragging")}function o(t){return h(t)&&!n("disableResizing")}function h(t){return J(t.editable,(t.source||{}).editable,n("editable"))}function u(t){S={};var e,i,s=t.length;for(e=0;s>e;e++)i=t[e],S[i._id]?S[i._id].push(i):S[i._id]=[i]}function p(t){return t.end?d(t.end):D(t)}function f(t,e){j.push(e),I[t._id]?I[t._id].push(e):I[t._id]=[e]}function g(){j=[],I={}}function m(t,i){i.click(function(s){return i.hasClass("ui-draggable-dragging")||i.hasClass("ui-resizable-resizing")?e:r("eventClick",this,t,s)}).hover(function(e){r("eventMouseover",this,t,e)},function(e){r("eventMouseout",this,t,e)})}function v(t,e){y(t,e,"show")}function b(t,e){y(t,e,"hide")}function y(t,e,i){var s,n=I[t._id],r=n.length;for(s=0;r>s;s++)e&&n[s][0]==e[0]||n[s][i]()}function _(t,e,i,s,n,a,o){var l=e.allDay,h=e._id;x(S[h],i,s,n),r("eventDrop",t,e,i,s,n,function(){x(S[h],-i,-s,l),M(h)},a,o),M(h)}function w(t,e,i,s,n,a){var o=e._id;k(S[o],i,s),r("eventResize",t,e,i,s,function(){k(S[o],-i,-s),M(o)},n,a),M(o)}function x(t,i,s,n){s=s||0;for(var r,a=t.length,o=0;a>o;o++)r=t[o],n!==e&&(r.allDay=n),c(l(r.start,i,!0),s),r.end&&(r.end=c(l(r.end,i,!0),s)),T(r,P)}function k(t,e,i){i=i||0;for(var s,n=t.length,r=0;n>r;r++)s=t[r],s.end=c(l(p(s),e,!0),i),T(s,P)}var C=this;C.element=t,C.calendar=i,C.name=s,C.opt=n,C.trigger=r,C.isEventDraggable=a,C.isEventResizable=o,C.reportEvents=u,C.eventEnd=p,C.reportEventElement=f,C.reportEventClear=g,C.eventElementHandlers=m,C.showEvents=v,C.hideEvents=b,C.eventDrop=_,C.eventResize=w;var D=C.defaultEventEnd,T=i.normalizeEvent,M=i.reportEventChange,S={},j=[],I={},P=i.options}function ce(){function i(t,e){var i,s,l,d,m,v,b,y,_=N(),w=M(),x=j(),k=0,C=t.length;for(_[0].innerHTML=n(t),r(t,_.children()),a(t),o(t,_,e),h(t),c(t),u(t),i=p(),s=0;w>s;s++){for(l=0,d=[],m=0;x>m;m++)d[m]=0;for(;C>k&&(v=t[k]).row==s;){for(b=W(d.slice(v.startCol,v.endCol)),v.top=b,b+=v.outerHeight,y=v.startCol;v.endCol>y;y++)d[y]=b;k++}i[s].height(W(d))}g(t,f(i))}function s(e,i,s){var a,o,l,d=t("<div/>"),m=N(),v=e.length;for(d[0].innerHTML=n(e),a=d.children(),m.append(a),r(e,a),h(e),c(e),u(e),g(e,f(p())),a=[],o=0;v>o;o++)l=e[o].element,l&&(e[o].row===i&&l.css("top",s),a.push(l[0]));return t(a)}function n(t){var e,i,s,n,r,a,o,l,h,c,u=b("isRTL"),d=t.length,p=q(),f=p.left,g=p.right,m="";for(e=0;d>e;e++)i=t[e],s=i.event,r=["fc-event","fc-event-skin","fc-event-hori"],_(s)&&r.push("fc-event-draggable"),u?(i.isStart&&r.push("fc-corner-right"),i.isEnd&&r.push("fc-corner-left"),a=H(i.end.getDay()-1),o=H(i.start.getDay()),l=i.isEnd?F(a):f,h=i.isStart?A(o):g):(i.isStart&&r.push("fc-corner-left"),i.isEnd&&r.push("fc-corner-right"),a=H(i.start.getDay()),o=H(i.end.getDay()-1),l=i.isStart?F(a):f,h=i.isEnd?A(o):g),r=r.concat(s.className),s.source&&(r=r.concat(s.source.className||[])),n=s.url,c=V(s,b),m+="<div class='"+r.join(" ")+"'"+" style='position:absolute;z-index:8;left:"+l+"px;"+c+"'"+">"+(n?"<a href='"+Y(n)+"'>":"")+"<div"+" class='fc-event-inner fc-event-skin'"+(c?" style='"+c+"'":"")+">",!s.allDay&&i.isStart&&(m+="<span class='fc-event-time'>"+Y(z(s.start,s.end,b("timeFormat")))+"</span>"),m+="<span class='fc-event-title'>"+Y(s.title)+"</span>"+"</div>",i.isEnd&&w(s)&&(m+="<div class='ui-resizable-handle ui-resizable-"+(u?"w":"e")+"'>"+"&nbsp;&nbsp;&nbsp;"+"</div>"),m+=(n?"</a>":"")+"</div>",i.left=l,i.outerWidth=h-l,i.startCol=a,i.endCol=o+1;return m}function r(e,i){var s,n,r,a,o,l=e.length;for(s=0;l>s;s++)n=e[s],r=n.event,a=t(i[s]),o=y("eventRender",r,r,a),o===!1?a.remove():(o&&o!==!0&&(o=t(o).css({position:"absolute",left:n.left}),a.replaceWith(o),a=o),n.element=a)}function a(t){var e,i,s,n=t.length;for(e=0;n>e;e++)i=t[e],s=i.element,s&&k(i.event,s)}function o(t,e,i){var s,n,r,a,o=t.length;for(s=0;o>s;s++)n=t[s],r=n.element,r&&(a=n.event,a._id===i?L(a,r,n):r[0]._fci=s);S(e,t,L)}function h(t){var i,s,n,r,a,o=t.length,l={};for(i=0;o>i;i++)s=t[i],n=s.element,n&&(r=s.key=G(n[0]),a=l[r],a===e&&(a=l[r]=P(n,!0)),s.hsides=a)}function c(t){var e,i,s,n=t.length;for(e=0;n>e;e++)i=t[e],s=i.element,s&&(s[0].style.width=Math.max(0,i.outerWidth-i.hsides)+"px")}function u(t){var i,s,n,r,a,o=t.length,l={};for(i=0;o>i;i++)s=t[i],n=s.element,n&&(r=s.key,a=l[r],a===e&&(a=l[r]=R(n)),s.outerHeight=n[0].offsetHeight+a)}function p(){var t,e=M(),i=[];for(t=0;e>t;t++)i[t]=I(t).find("td:first div.fc-day-content > div");return i}function f(t){var e,i=t.length,s=[];for(e=0;i>e;e++)s[e]=t[e][0].offsetTop;return s}function g(t,e){var i,s,n,r,a=t.length;for(i=0;a>i;i++)s=t[i],n=s.element,n&&(n[0].style.top=e[s.row]+(s.top||0)+"px",r=s.event,y("eventAfterRender",r,r,n))}function m(e,i,n){var r=b("isRTL"),a=r?"w":"e",o=i.find("div.ui-resizable-"+a),h=!1;X(i),i.mousedown(function(t){t.preventDefault()}).click(function(t){h&&(t.preventDefault(),t.stopImmediatePropagation())}),o.mousedown(function(o){function c(i){y("eventResizeStop",this,e,i),t("body").css("cursor",""),f.stop(),B(),u&&T(this,e,u,0,i),setTimeout(function(){h=!1},0)}if(1==o.which){h=!0;var u,p,f=v.getHoverListener(),g=M(),m=j(),b=r?-1:1,_=r?m-1:0,w=i.css("top"),k=t.extend({},e),S=E(e.start);U(),t("body").css("cursor",a+"-resize").one("mouseup",c),y("eventResizeStart",this,e,o),f.start(function(t,i){if(t){var o=Math.max(S.row,t.row),h=t.col;1==g&&(o=0),o==S.row&&(h=r?Math.min(S.col,h):Math.max(S.col,h)),u=7*o+h*b+_-(7*i.row+i.col*b+_);var c=l(x(e),u,!0);if(u){k.end=c;var f=p;p=s(O([k]),n.row,w),p.find("*").css("cursor",a+"-resize"),f&&f.remove(),D(e)}else p&&(C(e),p.remove(),p=null);B(),$(e.start,l(d(c),1))}},o)}})}var v=this;v.renderDaySegs=i,v.resizableDayEvent=m;var b=v.opt,y=v.trigger,_=v.isEventDraggable,w=v.isEventResizable,x=v.eventEnd,k=v.reportEventElement,C=v.showEvents,D=v.hideEvents,T=v.eventResize,M=v.getRowCnt,j=v.getColCnt;v.getColWidth;var I=v.allDayRow,q=v.allDayBounds,F=v.colContentLeft,A=v.colContentRight,H=v.dayOfWeekCol,E=v.dateCell,O=v.compileDaySegs,N=v.getDaySegmentContainer,L=v.bindDaySeg,z=v.calendar.formatDates,$=v.renderDayOverlay,B=v.clearOverlays,U=v.clearSelection}function ue(){function e(t,e,n){i(),e||(e=l(t,n)),h(t,e,n),s(t,e,n)}function i(t){u&&(u=!1,c(),o("unselect",null,t))}function s(t,e,i,s){u=!0,o("select",null,t,e,i,s)}function n(e){var n=r.cellDate,o=r.cellIsAllDay,l=r.getHoverListener(),u=r.reportDayClick;if(1==e.which&&a("selectable")){i(e);var d;l.start(function(t,e){c(),t&&o(t)?(d=[n(e),n(t)].sort(z),h(d[0],d[1],!0)):d=null},e),t(document).one("mouseup",function(t){l.stop(),d&&(+d[0]==+d[1]&&u(d[0],!0,t),s(d[0],d[1],!0,t))})}}var r=this;r.select=e,r.unselect=i,r.reportSelection=s,r.daySelectionMousedown=n;var a=r.opt,o=r.trigger,l=r.defaultSelectionEnd,h=r.renderSelection,c=r.clearSelection,u=!1;a("selectable")&&a("unselectAuto")&&t(document).mousedown(function(e){var s=a("unselectCancel");s&&t(e.target).parents(s).length||i(e)})}function de(){function e(e,i){var s=r.shift();return s||(s=t("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),s[0].parentNode!=i[0]&&s.appendTo(i),n.push(s.css(e).show()),s}function i(){for(var t;t=n.shift();)r.push(t.hide().unbind())}var s=this;s.renderOverlay=e,s.clearOverlays=i;var n=[],r=[]}function pe(t){var e,i,s=this;s.build=function(){e=[],i=[],t(e,i)},s.cell=function(t,s){var n,r=e.length,a=i.length,o=-1,l=-1;for(n=0;r>n;n++)if(s>=e[n][0]&&e[n][1]>s){o=n;break}for(n=0;a>n;n++)if(t>=i[n][0]&&i[n][1]>t){l=n;break}return o>=0&&l>=0?{row:o,col:l}:null},s.rect=function(t,s,n,r,a){var o=a.offset();return{top:e[t][0]-o.top,left:i[s][0]-o.left,width:i[r][1]-i[s][0],height:e[n][1]-e[t][0]}}}function fe(e){function i(t){ge(t);var i=e.cell(t.pageX,t.pageY);(!i!=!a||i&&(i.row!=a.row||i.col!=a.col))&&(i?(r||(r=i),n(i,r,i.row-r.row,i.col-r.col)):n(i,r),a=i)}var s,n,r,a,o=this;o.start=function(o,l,h){n=o,r=a=null,e.build(),i(l),s=h||"mousemove",t(document).bind(s,i)},o.stop=function(){return t(document).unbind(s,i),a}}function ge(t){t.pageX===e&&(t.pageX=t.originalEvent.pageX,t.pageY=t.originalEvent.pageY)}function me(t){function i(e){return n[e]=n[e]||t(e)}var s=this,n={},r={},a={};s.left=function(t){return r[t]=r[t]===e?i(t).position().left:r[t]},s.right=function(t){return a[t]=a[t]===e?s.left(t)+i(t).width():a[t]},s.clear=function(){n={},r={},a={}}}var ve={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},be={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},ye=t.fullCalendar={version:"1.5.4"},_e=ye.views={};t.fn.fullCalendar=function(i){if("string"==typeof i){var n,r=Array.prototype.slice.call(arguments,1);return this.each(function(){var s=t.data(this,"fullCalendar");if(s&&t.isFunction(s[i])){var a=s[i].apply(s,r);n===e&&(n=a),"destroy"==i&&t.removeData(this,"fullCalendar")}}),n!==e?n:this}var a=i.eventSources||[];return delete i.eventSources,i.events&&(a.push(i.events),delete i.events),i=t.extend(!0,{},ve,i.isRTL||i.isRTL===e&&ve.isRTL?be:{},i),this.each(function(e,n){var r=t(n),o=new s(r,i,a);r.data("fullCalendar",o),o.render()}),this},ye.sourceNormalizers=[],ye.sourceFetchers=[];var we={dataType:"json",cache:!1},xe=1;ye.addDays=l,ye.cloneDate=d,ye.parseDate=v,ye.parseISO8601=b,ye.parseTime=y,ye.formatDate=_,ye.formatDates=w;var ke=["sun","mon","tue","wed","thu","fri","sat"],Ce=864e5,De=36e5,Te=6e4,Me={s:function(t){return t.getSeconds()},ss:function(t){return $(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return $(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return $(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return $(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return $(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return $(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},t:function(t){return 12>t.getHours()?"a":"p"},tt:function(t){return 12>t.getHours()?"am":"pm"},T:function(t){return 12>t.getHours()?"A":"P"},TT:function(t){return 12>t.getHours()?"AM":"PM"},u:function(t){return _(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){var e=t.getDate();return e>10&&20>e?"th":["st","nd","rd"][e%10-1]||"th"}};ye.applyAll=K,_e.month=Z,_e.basicWeek=te,_e.basicDay=ee,i({weekMode:"fixed"}),_e.agendaWeek=ne,_e.agendaDay=re,i({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24})})(jQuery);